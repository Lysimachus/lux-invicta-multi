# Faction tags need to start with 'faction_'

# Supported types:
# liege_titles, liege_titles_w_claimant, character

# The succession law factions have hard coded elements to ensure that the correct heir is shown in Plot and 
# Faction interfaces and that AI faction members vote for laws in accordance with the faction goal.
# The valid tags correspond to the law name: faction_succ_seniority, faction_succ_primogeniture, etc.
# (faction_succ_ultimogeniture is fully supported by the code, but not currently implemented)

###############
# FACTIONS
###############

# Institute Succession by Seniority in Liege Title
faction_succ_seniority = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = { 
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }

				}
			}
		}
		NOT = { trait = incapable }
		liege = {
			is_vice_royalty = no
			is_feudal = yes 
			OR = {
				year = 1350
				primary_title = { is_tribal_type_title = no }
				NOR = {
					culture = ROOT
					religion = ROOT
				}
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		primary_title = { higher_tier_than = BARON }
		
		NOR = {
			trait = incapable
			religion_group = muslim
			in_faction = faction_succ_primogeniture
			in_faction = faction_succ_feudal_elective
			in_faction = faction_succ_gavelkind
			in_faction = faction_succ_tanistry
			in_faction = faction_succ_ultimogeniture
		}
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			crownlaw_title = {
				NOR = {
					has_law = centralization_2
					has_law = centralization_3
					has_law = centralization_4
				}
			}
		}
		
		NOT = { has_character_modifier = faction_succ_seniority_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		is_law_potential = succ_seniority
		is_law_allowed = succ_seniority
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		NOR = { 
			has_law = succ_seniority
			AND = {
				has_law = succession_voting_power_1
				has_law = succ_feudal_elective
			}
		}
		
		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_seniority_succession_law
				}
			}
			
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus" }
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = { 
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }

					}
				}
			}
			
			NOR = {
				trait = incapable
				religion_group = muslim
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}			
		}		
	}
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }

#			heir_under_seniority_law = {
#				OR = {
#					ROOT = { current_heir = { character = PREV } } 
#					FROM = {
#						opinion_diff = {
#							first = LIEGE
#							second = PREV
#							value = -25 # I don't like the pretender enough
#							as_if_liege = yes
#						}
#					}
#				}
#			}

		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_succ_seniority }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_succ_seniority
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}				
			}
		}
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_succ_seniority_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_seniority }
					opinion = { who = LIEGE value = 50 } 
				}
				AND = {
					in_faction = faction_succ_seniority
					opinion = { who = LIEGE value = 75 } 
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			FROM = { # Remember: the faction leader is also the person who would inherit under this law
				NAND = {
					culture = ROOT
					religion = ROOT
				}
				liege = {
					any_demesne_title = {
						OR = {
							is_primary_holder_title = yes
							higher_tier_than = DUKE
						}
						ROOT = {
							primary_title = {
								de_jure_liege_or_above = PREVPREV
							}
						}
						any_claimant = {
							culture = ROOT
							religion = ROOT
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				heir_under_seniority_law = {
					ROOT = {
						OR = {
							AND = {
								NOT = { in_faction = faction_succ_seniority }
								opinion_diff = {
									first = LIEGE
									second = PREV
									value = -10 # I don't like the pretender enough
									as_if_liege = yes
								}
							}
							AND = {
								in_faction = faction_succ_seniority
								opinion_diff = {
									first = LIEGE
									second = PREV
									value = 10
									as_if_liege = yes
								}
							}
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 } 
			NOR = {
				trait = deceitful
				trait = ambitious
				trait = envious
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}		
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 } 
			OR = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		
		modifier = {
			factor = 2
			FROMFROM = {
				heir_under_seniority_law = {
					ROOT = {
						opinion_diff = {
							first = PREV
							second = LIEGE
							value = 25
							as_if_liege = yes
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		has_law = succ_seniority
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_seniority
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Institute Succession by Primogeniture
faction_succ_primogeniture = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = { 
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
		NOT = { trait = incapable }
		liege = { 
			is_vice_royalty = no
			is_feudal = yes 
			OR = {
				year = 1350
				primary_title = { is_tribal_type_title = no }
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}	
		}
		primary_title = { higher_tier_than = BARON }
		
		NOR = {
			religion_group = muslim
			trait = incapable
			in_faction = faction_succ_seniority
			in_faction = faction_succ_feudal_elective
			in_faction = faction_succ_gavelkind
			in_faction = faction_succ_tanistry
			in_faction = faction_succ_ultimogeniture
		}
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			crownlaw_title = {
				NOR = {
					has_law = centralization_2
					has_law = centralization_3
					has_law = centralization_4
				}
			}
		}
		
		NOT = { has_character_modifier = faction_succ_primogeniture_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		is_law_potential = succ_primogeniture
		is_law_allowed = succ_primogeniture
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		NOR = { 
			has_law = succ_primogeniture
			AND = {
				has_law = succession_voting_power_1
				has_law = succ_feudal_elective
			}
		}
		
		holder_scope = {
			NOR = {
				any_war = {
					war_title = ROOT
					using_cb = change_primogeniture_succession_law
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus" }
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = { 
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
					}
				}
			}
			
			NOR = {
				trait = incapable
				religion_group = muslim
				in_faction = faction_succ_seniority
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}	
		}
	}	
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			NOT = { would_be_heir_under_law = { who = FROM law = primogeniture } }
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_succ_primogeniture }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_succ_primogeniture
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}					
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_seniority
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_succ_primogeniture_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				heir_under_primogeniture_law = {
					ROOT = {
						OR = {
							AND = {
								NOT = { in_faction = faction_succ_primogeniture }
								opinion_diff = {
									first = LIEGE
									second = PREV
									value = -10 # I don't like the pretender enough
									as_if_liege = yes
								}
							}
							AND = {
								in_faction = faction_succ_primogeniture
								opinion_diff = {
									first = LIEGE
									second = PREV
									value = 10
									as_if_liege = yes
								}
							}
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_primogeniture }
					opinion = { who = LIEGE value = 50 } 
				}
				AND = {
					in_faction = faction_succ_primogeniture
					opinion = { who = LIEGE value = 75 } 
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			FROM = { # Remember: the faction leader is also the person who would inherit under this law
				NAND = {
					culture = ROOT
					religion = ROOT
				}
				liege = {
					any_demesne_title = {
						OR = {
							is_primary_holder_title = yes
							higher_tier_than = DUKE
						}
						ROOT = {
							primary_title = {
								de_jure_liege_or_above = PREVPREV
							}
						}
						any_claimant = {
							culture = ROOT
							religion = ROOT
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 } 
			NOR = {
				trait = deceitful
				trait = ambitious
				trait = envious
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}		
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 } 
			OR = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 2
			FROMFROM = {
				heir_under_primogeniture_law = {
					ROOT = {
						opinion_diff = {
							first = PREV
							second = LIEGE
							value = 25
							as_if_liege = yes
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		has_law = succ_primogeniture
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_primogeniture
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}


# Institute Succession by Gavelkind
faction_succ_gavelkind = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = { 
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }

				}
			}
		}
		liege = { 
			is_vice_royalty = no
			is_feudal = yes 
			OR = {
				year = 1350
				primary_title = { is_tribal_type_title = no }
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		primary_title = { higher_tier_than = BARON }
		
		NOR = {
			trait = incapable
			religion_group = muslim
			in_faction = faction_succ_seniority
			in_faction = faction_succ_primogeniture
			in_faction = faction_succ_feudal_elective
			in_faction = faction_succ_tanistry
			in_faction = faction_succ_ultimogeniture
		}
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			liege = {
				primary_title = {
					NOR = {
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		
		NOT = { has_character_modifier = faction_succ_gavelkind_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		is_law_potential = succ_gavelkind
		is_law_allowed = succ_gavelkind
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		NOT = { has_law = succ_gavelkind }
		
		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_gavelkind_succession_law
				}
			}
			
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
			
		}
		
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus" }
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = { 
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }

					}
				}
			}
			
			NOR = {
				trait = incapable
				religion_group = muslim
				in_faction = faction_succ_seniority
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
		}
	}
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			has_law = succ_feudal_elective
		}
		
		modifier = {
			factor = 0
			OR = {
				FROM = { higher_tier_than = COUNT }
				holder_scope = { lower_tier_than = KING }
			}
		}
		
		modifier = {
			factor = 0
			# Is not a child of the title holder
			holder_scope = {
				NOT = {
					any_demesne_title = {
						tier = PREVPREV
						NOT = { title = PREVPREV }
					}
				}
				FROM = {
					OR = {
						NOT = { is_child_of = PREV }
						trait = bastard
						AND = {
							is_female = yes
							is_pretender = no
						}
					}
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				NAND = {
					culture = FROM
					religion = FROM
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_succ_gavelkind }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_succ_gavelkind
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}					
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 4.0
			FROM = { is_pretender = yes }
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_seniority
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_gavelkind }
					opinion_diff = {
						first = LIEGE
						second = FROM
						value = 10 # I like my liege rather a lot more than the faction leader
						as_if_liege = yes
					}
				}
				AND = {
					in_faction = faction_succ_gavelkind
					opinion_diff = {
						first = LIEGE
						second = FROM
						value = 25
						as_if_liege = yes
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_succ_gavelkind_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_gavelkind }
					opinion = { who = LIEGE value = 50 } 
				}
				AND = {
					in_faction = faction_succ_gavelkind
					opinion = { who = LIEGE value = 75 } 
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 } 
			NOR = {
				trait = deceitful
				trait = ambitious
				trait = envious
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}		
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 } 
			OR = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 2.0
			opinion_diff = {
				first = FROM
				second = LIEGE
				value = 25
				as_if_liege = yes
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		has_law = succ_gavelkind
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_gavelkind
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Institute Succession by Feudal Elective
faction_succ_feudal_elective = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			liege = { 
				primary_title = {
					has_law = war_voting_power_1
					has_law = law_voting_power_1
				}
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
			is_nomadic = yes
		}
		NOT = { trait = incapable }
		liege = { 
			is_vice_royalty = no
			is_feudal = yes 
			OR = {
				year = 1350
				primary_title = { is_tribal_type_title = no }
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		primary_title = { higher_tier_than = BARON }
		
		NOR = {
			religion_group = muslim
			trait = incapable
			in_faction = faction_succ_seniority
			in_faction = faction_succ_primogeniture
			in_faction = faction_succ_gavelkind
			in_faction = faction_succ_tanistry
			in_faction = faction_succ_ultimogeniture
		}
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			liege = {
				primary_title = {
					NOR = {
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		
		NOT = { has_character_modifier = faction_succ_feudal_elective_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		is_law_potential = succ_feudal_elective
		is_law_allowed = succ_feudal_elective	
		NOT = { has_law = succ_feudal_elective }
		has_law = centralization_0
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		
		holder_scope = {
			NOR = {
				any_war = {
					war_title = ROOT
					using_cb = change_feudal_elective_succession_law
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
		
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus" }
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = { 
					primary_title = {
						has_law = war_voting_power_1
						has_law = law_voting_power_1
					}
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
					}
				}
			}
			
			NOR = {
				trait = incapable
				religion_group = muslim
				in_faction = faction_succ_seniority
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
		}
	}		
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = {
				lower_tier_than = DUKE
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		# Not for the current heir
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		# Not for spouse of current heir
		modifier = {
			factor = 0
			current_heir = {
				any_spouse = { character = FROM }
			}
		}
		
		# Not for children of the present holder
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_child_of = PREV
				}
			}
		}
		
		# Not for dynasty members if under seniority law
		modifier = {
			factor = 0
			has_law = succ_seniority
			holder_scope = {
				dynasty = FROM
			}
		}
		
		# If next in line under seniority, choose that plot insetead
		modifier = {
			factor = 0
			would_be_heir_under_law = { who = FROM law = seniority }
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				NAND = {
					culture = FROM
					religion = FROM
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_succ_feudal_elective }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_succ_feudal_elective
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}	
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}				
			}
		}

		modifier = {
			factor = 4
			FROM = {
				liege = {
					has_council = yes
				}
				is_voter = yes
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 4.0
			FROM = { is_pretender = yes }
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			calc_true_if = {
				amount = 6
				has_law = law_voting_power_1
				has_law = banish_voting_power_1
				has_law = execution_voting_power_1
				has_law = revoke_title_voting_power_1
				has_law = grant_title_voting_power_1
				has_law = imprison_voting_power_1
				has_law = war_voting_power_1
			}
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}		
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				has_character_modifier = in_seclusion
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_seniority
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_feudal_elective }
					opinion_diff = {
						first = LIEGE
						second = FROM
						value = 10 # I like my liege rather a lot more than the faction leader
						as_if_liege = yes
					}
				}
				AND = {
					in_faction = faction_succ_feudal_elective
					opinion_diff = {
						first = LIEGE
						second = FROM
						value = 25
						as_if_liege = yes
					}
				}
			}
			
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_feudal_elective }
					opinion = { who = LIEGE value = 50 } 
				}
				AND = {
					in_faction = faction_succ_feudal_elective
					opinion = { who = LIEGE value = 75 } 
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_succ_feudal_elective_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 } 
			NOR = {
				trait = deceitful
				trait = ambitious
				trait = envious
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}		
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 } 
			OR = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}

		modifier = {
			factor = 4
			liege = {
				has_council = yes
			}
			is_voter = yes
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 2.0
			opinion_diff = {
				first = FROM
				second = LIEGE
				value = 25
				as_if_liege = yes
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
		modifier = {
			factor = 0.75
			calc_true_if = {
				amount = 2
				has_law = law_voting_power_1
				has_law = banish_voting_power_1
				has_law = execution_voting_power_1
				has_law = revoke_title_voting_power_1
				has_law = grant_title_voting_power_1
				has_law = imprison_voting_power_1
				has_law = war_voting_power_1
			}
		}
		modifier = {
			factor = 0.75
			calc_true_if = {
				amount = 4
				has_law = law_voting_power_1
				has_law = banish_voting_power_1
				has_law = execution_voting_power_1
				has_law = revoke_title_voting_power_1
				has_law = grant_title_voting_power_1
				has_law = imprison_voting_power_1
				has_law = war_voting_power_1
			}
		}
		modifier = {
			factor = 0.75
			calc_true_if = {
				amount = 6
				has_law = law_voting_power_1
				has_law = banish_voting_power_1
				has_law = execution_voting_power_1
				has_law = revoke_title_voting_power_1
				has_law = grant_title_voting_power_1
				has_law = imprison_voting_power_1
				has_law = war_voting_power_1
			}
		}
	}
	
	success = {
		has_law = succ_feudal_elective
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_feudal_elective
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}


# Lower Crown Authority
faction_lower_crown_authority = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { has_dlc = "Zeus" }
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes
			OR = {
				tribal_authority_religions_trigger = no #Tribal Authority religions
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		primary_title = { higher_tier_than = BARON }
		
		NOR = {
			trait = incapable
			has_character_modifier = faction_lower_CA_ultimatum_timer
		}
	}
	
	# Target scope
	allow = {
		higher_tier_than = DUKE
	
		holder_scope = {
			independent = yes
		}
		
		OR = {
			is_primary_holder_title = yes
			is_titular = no
		}

		NOT = { has_law = centralization_0 }
		
		holder_scope = {
			NOR = {
				any_war = {
					war_title = ROOT
					using_cb = lower_crown_authority_law
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			NOT = { has_dlc = "Zeus"}
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			NOT = {
				has_character_modifier = in_seclusion
			}
		}
	}		
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			NOT = { FROM = { crownlaw_title = { title = ROOT } } }
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_authority }
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				NAND = {
					culture = FROM
					religion = FROM
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}				
			}
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_lower_crown_authority }
						opinion = { who = LIEGE value = 25 } 
					}
					AND = {
						leads_faction = faction_lower_crown_authority
						opinion = { who = LIEGE value = 50 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0.2
			FROM = { opinion = { who = LIEGE value = 5 } }
		}
		
		modifier = {
			factor = 0.1
			has_law = centralization_1
		}
		modifier = {
			factor = 1.5
			has_law = centralization_3
		}
		modifier = {
			factor = 2.25
			has_law = centralization_4
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = -10 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1

		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			NOT = { crownlaw_title = { title = FROMFROM } }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_lower_CA_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			
			OR = {
				AND = {
					NOT = { in_faction = faction_lower_crown_authority }
					opinion = { who = LIEGE value = 25 } 
				}
				AND = {
					in_faction = faction_lower_crown_authority
					opinion = { who = LIEGE value = 50 } 
				}
			}
			
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			NOR = {
				opinion = { who = FROM value = -40 }
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0.2
			opinion = { who = LIEGE value = 5 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -10 } }
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } }
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } }
		}
		
		modifier = {
			factor = 0.1
			FROMFROM = {
				has_law = centralization_1
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 1.5
			FROMFROM = {
				has_law = centralization_3
			}
		}
		modifier = {
			factor = 2.25
			FROMFROM = {
				has_law = centralization_4
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		holder_scope = {
			FROM = {
				has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_authority }
			}
		}
	}
	
	abort = {
		always = no
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_lower_crown_authority
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Loosen Clan Control
faction_loosen_clan_control = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		NOT = { trait = incapable }
		OR = {
			tribal_authority_religions_trigger = yes
			AND = {
				has_dlc = "Zeus"
				OR = {
					is_voter = no
					is_nomadic = yes
					liege = { 
						OR = {
							is_council_content = no
							NOT = { primary_title = { has_law = war_voting_power_1 } }
						}
					}
				}
			}
		}
		liege = {
			tribal_authority_religions_trigger = yes #Tribal Authority religions
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		primary_title = { higher_tier_than = BARON }
		
		NOT = { has_character_modifier = faction_loosen_clan_control_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		higher_tier_than = DUKE
	
		holder_scope = {
			independent = yes
		}
		
		is_primary_holder_title = yes

		NOT = { has_law = clanic_centralization_0 }
		
		holder_scope = {
			NOR = {
				any_war = {
					war_title = ROOT
					using_cb = loosen_clan_control_law
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				is_tribal = yes
				AND = {
					has_dlc = "Zeus"
					OR = {
						is_voter = no
						is_nomadic = yes
						is_tribal = yes
						liege = { 
							OR = {
								is_council_content = no
								NOT = { primary_title = { has_law = war_voting_power_1 } }
							}
						}
					}
				}
			}
		}
	}		
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0
			FROM = { dislike_tribal_organization = no }
		}
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					has_opinion_modifier = { who = PREV modifier = opinion_loosened_clan_control }
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					NOT = { culture = FROM }
					NOT = { religion = FROM }
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}				
			}
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_loosen_clan_control }
						opinion = { who = LIEGE value = 25 } 
					}
					AND = {
						leads_faction = faction_loosen_clan_control
						opinion = { who = LIEGE value = 50 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0.2
			FROM = { opinion = { who = LIEGE value = 5 } }
		}
		
		modifier = {
			factor = 0.1
			has_law = clanic_centralization_1
		}
		modifier = {
			factor = 1.5
			has_law = clanic_centralization_3
		}
		modifier = {
			factor = 2.25
			has_law = clanic_centralization_4
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = -10 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0
			dislike_tribal_organization = no
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
		}
		
		modifier = {
			factor = 0
			NOT = { crownlaw_title = { title = FROMFROM } }
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_loosen_clan_control_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			
			OR = {
				AND = {
					NOT = { in_faction = faction_lower_crown_authority }
					opinion = { who = LIEGE value = 25 } 
				}
				AND = {
					in_faction = faction_lower_crown_authority
					opinion = { who = LIEGE value = 50 } 
				}
			}
			
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_lower_TO_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			NOR = {
				opinion = { who = FROM value = -40 }
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0.2
			opinion = { who = LIEGE value = 5 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -10 } }
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } }
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } }
		}
		
		modifier = {
			factor = 0.1
			FROMFROM = {
				has_law = clanic_centralization_1
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 1.5
			FROMFROM = {
				has_law = clanic_centralization_3
			}
		}
		modifier = {
			factor = 2.25
			FROMFROM = {
				has_law = clanic_centralization_4
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		holder_scope = {
			FROM = {
				has_opinion_modifier = { who = PREV modifier = opinion_loosened_clan_control }
			}
		}
	}
	
	abort = {
		always = no
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_loosen_clan_control
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}
# Independence
faction_independence = {
	type = character
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = { 
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
		
		NOT = { trait = incapable }
		
		higher_tier_than = BARON
		OR = {
			ai = yes
			is_feudal = yes
			is_tribal = yes
			is_nomadic = yes
			higher_tier_than = count
		}
		
		liege = {
			independent = yes
			NOT = {
				any_war = {
					using_cb = cb_faction_independence
				}
			}
			
			# Mongols and Aztecs do not have independence revolt problems before 1350
			OR = {
				year = 1350
				primary_title = { is_tribal = no }
				NOR = {
					culture = ROOT
					religion = ROOT
					culture = nahuatl
				}
			}
			# Not allowed to start factions like this if our capital borders the liege's capital
			NOR = {
				capital_scope = {
					any_neighbor_province = {
						ROOT = {
							capital_scope = {
								province = PREVPREV
							}
						}
					}
				}
				#Not allowed to start factions if holding a temporary title
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		
		OR = {
			is_nomadic = no
			NAND = {
				has_dlc = "Horse Lords"
				liege = {
					has_blood_oath_with = PREV
				}
			}
		}
		
		# No independence factions in merchant republics
		NOR = {
			AND = {
				is_merchant_republic = yes
				liege = {
					is_merchant_republic = yes
				}
			}
			has_landed_title = k_orthodox
		
			has_character_modifier = faction_independence_ultimatum_timer
		}
		OR = {
			ai = no
			liege = {
				higher_tier_than = DUKE
			}
		}
		mercenary = no
	}
	
	# Target scope
	allow = {
		prisoner = no
		
		NOR = {
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
			AND = {
				is_nomadic = yes
				clan_opinion = { who = LIEGE value = 0 }
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			mercenary = no
			OR = {
				NOT = { has_dlc = "Zeus"}
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = {
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
					}
				}
			}
			OR = {
				is_nomadic = no
				NOT = {
					clan_opinion = { who = LIEGE value = 0 }
				}
			}
			
			# No independence factions in merchant republics
			NAND = {
				is_merchant_republic = yes
				liege = {
					is_merchant_republic = yes
				}
			}
			
			# Can't join factions when in blood oath with liege
			OR = {
				is_nomadic = no
				NOT = { has_dlc = "Horse Lords" }
				liege = {
					NOT = { has_blood_oath_with = PREV }
				}
			}
		}
	}	
	
	# AI creation weight
	chance = {
		factor = 2
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}
		
		modifier = {
			factor = 0
			FROM = {
				has_character_modifier = in_seclusion
			}
		}
		
		modifier = {
			factor = 0
			war = yes
		}
		
		modifier = {
			factor = 0
			is_patrician = yes
			is_merchant_republic = no
		}
		
		modifier = {
			factor = 0
			liege = {
				religion = ROOT
				culture = ROOT
				OR = {
					NOT = { distance = { who = ROOT distance = 100 } }
					AND = {
						NOT = { distance = { who = ROOT distance = 200 } }
						ROOT = {
							OR = {
								NOT = { religion_group = pagan_group }
								is_reformed_religion = yes
							}
						}
						OR = {
							NOT = { ROOT = { religion_group = pagan_group } }
							ROOT = { is_reformed_religion = yes }
						}
					}
					AND = {
						de_jure_vassal_or_below = ROOT
						NOT = { ROOT = { tier = KING } }
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = {
				current_heir = {
					character = ROOT
				}
			}
		}
		
		modifier = {
			factor = 0
			lower_tier_than = KING
			OR = {
				NOT = { religion_group = pagan_group }
				is_reformed_religion = yes
			}
			liege = {
				culture_group = ROOT
				religion_group = ROOT
				OR = {
					religion = ROOT
					culture = ROOT
				}
				NOT = { distance = { who = ROOT distance = 200 } }
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			lower_tier_than = KING
			liege = {
				NAND = {
					culture = ROOT
					religion = ROOT
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					ROOT = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = ROOT
						religion = ROOT
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { leads_faction = faction_independence }
					opinion = { who = LIEGE value = 65 }
				}
				AND = {
					leads_faction = faction_independence
					opinion = { who = LIEGE value = 75 } 
				}
			}
		}
		
		modifier = {
			factor = 0
			preparing_invasion = yes
		}
		
		modifier = {
			factor = 0.1
			OR = {
				NOT = { religion_group = pagan_group }
				is_reformed_religion = yes
			}
			liege = {
				NOT = { distance = { who = ROOT distance = 200 } }
			}
		}
		
		# Clans are very unlikely to join Independence factions led by non-nomads
		modifier = {
			factor = 0.01
			is_nomadic = yes
			FROM = {
				is_nomadic = no
			}
		}
		
		modifier = {
			factor = 0.25
			liege = {
				religion = ROOT
				culture = ROOT
			}
		}
		
		modifier = {
			factor = 1.5
			liege = {
				distance = { who = ROOT distance = 300 }
			}
		}
		modifier = {
			factor = 2.0
			liege = {
				distance = { who = ROOT distance = 400 }
			}
		}
		
		modifier = {
			factor = 2.0
			religion_group = pagan_group
			is_reformed_religion = no
		}
		
		modifier = {
			factor = 4.0
			liege = {
				NOT = { religion_group = ROOT }
			}
		}
		
		modifier = {
			factor = 2.0
			liege = {
				NOT = { culture_group = ROOT }
			}
		}
		
		modifier = {
			factor = 0.5
			opinion = { who = LIEGE value = 50 } 
		}
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 40 } 
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = 0 } } 
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } } 
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } } 
		}
		
		modifier = {
			factor = 0.025
			trait = content
		}
		modifier = {
			factor = 0.025
			trait = imbecile
		}
		modifier = {
			factor = 0.025
			trait = craven
		}
		modifier = {
			factor = 0.1
			trait = inbred
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = slow
				trait = dull
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
		modifier = {
			factor = 1.5
			primary_title = {
				is_vice_royalty = yes
			}
		}
		#People don't like being part of Empires
		modifier = {
			factor = 1.5
			liege = {
				tier = emperor
			}
		}
		#Dejure characters are unlikely to go independent
		modifier = {
			factor = 0.01
			liege = {
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					ROOT = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
				}
			}
		}
		#Counts are too weak on their own
		modifier = {
			factor = 0
			tier = count
			liege = {
				higher_tier_than = duke
			}
		}
		
		#Muslims won't attempt to gain independence from someone who isn't decadent
		modifier = {
			factor = 0
			religion_group = muslim
			liege = { religion = ROOT }
			NOT = { liege = { decadence = 25 } }
		}
		modifier = {
			factor = 0
			FROM = {
				primary_title = { is_primary_type_title = yes } # Mercs, the Pope, Holy Orders, etc
			}
		}
		modifier = {
			factor = 0
			FROM = {
				has_opinion_modifier = {
					who = LIEGE
					modifier = opinion_coerced_into_leaving_faction
				}
				opinion = { who = LIEGE value = -25 }
			}
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 4
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				has_landed_title = k_orthodox
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			is_patrician = yes
			is_merchant_republic = no
		}
		
		modifier = {
			factor = 0
			liege = {
				religion = ROOT
				culture = ROOT
				OR = {
					NOT = { distance = { who = ROOT distance = 100 } }
					AND = {
						NOT = { distance = { who = ROOT distance = 200 } }
						ROOT = {
							OR = {
								NOT = { religion_group = pagan_group }
								is_reformed_religion = yes
							}
						}
					}
					AND = {
						de_jure_vassal_or_below = ROOT
						NOT = { ROOT = { tier = KING } }
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			lower_tier_than = KING
			OR = {
				NOT = { religion_group = pagan_group }
				is_reformed_religion = yes
			}
			liege = {
				culture_group = ROOT
				religion_group = ROOT
				OR = {
					religion = ROOT
					culture = ROOT
				}
				NOT = { distance = { who = ROOT distance = 200 } }
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_independence_ultimatum_timer
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			
			liege = {
				NAND = {
					culture = ROOT
					religion = ROOT
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					ROOT = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = ROOT
						religion = ROOT
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_independence }
					opinion = { who = LIEGE value = 65 }
				}
				AND = {
					in_faction = faction_independence
					opinion = { who = LIEGE value = 75 }
				}
			}
			
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
			any_realm_province = {
				any_neighbor_province = {
					owner = {
						OR = {
							AND = {
								liege = { character = FROMFROM }
								NOT = { in_faction = faction_independence }
							}
							any_liege = {
								liege = { character = FROMFROM }
								NOT = { in_faction = faction_independence }
							}
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			
			# Won't join this type of faction if our capital borders the liege's capital
			liege = {
				capital_scope = {
					any_neighbor_province = {
						ROOT = {
							capital_scope = {
								province = PREVPREV
							}
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 10000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 0.25
			OR = {
				NOT = { religion_group = pagan_group }
				is_reformed_religion = yes
			}
			liege = {
				NOT = { distance = { who = ROOT distance = 200 } }
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		# Clans are very unlikely to join Independence factions led by non-nomads
		modifier = {
			factor = 0.01
			is_nomadic = yes
			FROM = {
				is_nomadic = no
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.25
			liege = {
				religion = ROOT
				culture = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1.5
			liege = {
				distance = { who = ROOT distance = 300 }
			}
		}
		modifier = {
			factor = 2.0
			liege = {
				distance = { who = ROOT distance = 400 }
			}
		}
		
		modifier = {
			factor = 2.0
			religion_group = pagan_group
			is_reformed_religion = no
		}
		
		modifier = {
			factor = 10
			liege = {
				NOT = { religion_group = ROOT }
			}
		}
		
		modifier = {
			factor = 2.0
			liege = {
				NOT = { culture_group = ROOT }
			}
		}
		
		modifier = {
			factor = 0.5
			opinion = { who = LIEGE value = 50 } 
		}
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 40 } 
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = 0 } } 
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } } 
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } } 
		}
		
		modifier = {
			factor = 0.025
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.025
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.025
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
		modifier = {
			factor = 1.5
			liege = {
				tier = emperor
			}
		}
		#Isolated characters are more likely to want independence
		modifier = {
			factor = 2
			NOT = {
				any_realm_province = {
					any_neighbor_province = {
						owner = {
							OR = {
								AND = {
									liege = { character = FROMFROM }
									NOT = { in_faction = faction_independence }
								}
								any_liege = {
									liege = { character = FROMFROM }
									NOT = { in_faction = faction_independence }
								}
							}
						}
					}
				}
			}
		}
		#Characters that border independence faction members are more likely to want independence
		modifier = {
			factor = 1.5
			any_realm_province = {
				any_neighbor_province = {
					owner = {
						OR = {
							AND = {
								liege = { character = FROMFROM }
								in_faction = faction_independence
							}
							any_liege = {
								liege = { character = FROMFROM }
								in_faction = faction_independence
							}
						}
					}
				}
			}
		}
		#Dejure characters are unlikely to go independent
		modifier = {
			factor = 0.01
			liege = {
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					ROOT = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
				}
			}
		}
		#People don't want to serve heretics
		modifier = {
			factor = 10
			liege = {
				OR = {
					is_heresy_of = ROOT
					is_parent_religion = ROOT
				}
			}
		}
		
		#Muslims won't attempt to gain independence from someone who isn't decadent
		modifier = {
			factor = 0
			religion_group = muslim
			liege = { religion = ROOT }
			NOT = { liege = { decadence = 25 } }
		}
		modifier = {
			factor = 0
			primary_title = { is_primary_type_title = yes } # Mercs, the Pope, Holy Orders, etc
		}
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
			opinion = { who = LIEGE value = -25 }
		}
	}
	
	success = {
		independent = yes
	}
	
	abort = {
		always = no
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_independence
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}
# Support Claimant to Liege Title
faction_claimant = {
	type = liege_titles_w_claimant # 'new_character' is a Claimant, or, if the title is Elective, anyone eligible for election
	exclusive = yes # Can only lead or be in one faction of this type
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = {
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
		NOR = {
			trait = incapable
			has_character_modifier = faction_claimant_timer
		}
		liege = {
			is_vice_royalty = no
			OR = {
				is_feudal = yes
				is_tribal = yes
				is_nomadic = yes
			}
			OR = {
				# Hordes should have less problems with this type of faction until ca 1350
				year = 1350
				primary_title = {
					is_tribal = no
					is_nomadic = no
				}
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}		
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		primary_title = { higher_tier_than = BARON }
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			crownlaw_title = {
				NOR = {
					has_law = centralization_2
					has_law = centralization_3
					has_law = centralization_4
				}
			}
		}
		
		OR = {
			liege = {
				is_nomadic = no
			}
			AND = {
				liege = {
					is_nomadic = yes
					NOT = { has_blood_oath_with = PREV }
				}
				is_nomadic = yes
				new_character = {
					character = PREV
				}
				has_dlc = "Horse Lords"
			}
		}
	}
	
	# Target scope
	allow = {
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		new_character = {
			NOR = {
				has_landed_title = PREV
				is_vassal_or_below = FROM
			}
			
			OR = {
				same_realm = FROM
				FROM = {
					liege = { independent = yes }
				}
			}
			
			OR = {
				AND = {
					is_female = no
					NOT = {
						ROOT = {
							succ_law_title = {
								has_law = enatic_succession
							}
						}
					}
				}
				AND = {
					is_female = yes
					NOR = {
						religion_group = muslim
						ROOT = {
							succ_law_title = {
								has_law = agnatic_succession
							}
						}
					}
				}
			}
			
			OR = {
				ROOT = { has_law = succ_feudal_elective }
				has_claim = ROOT
			}
			
			OR = {
				is_ruler = no
				primary_title = {
					OR = {
						is_primary_type_title = no # Static Mercs, the Pope, Holy Orders, etc
						higher_tier_than = ROOT
						tier = ROOT
					}
				}
			}
			
			ROOT = {
				holder_scope = {
					NOT = {
						defending_against_claimant = {
							character = PREVPREV
							title = ROOT
						}
					}
				}
			}
		}
		
		NOT = {
			holder_scope = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus" }
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = { 
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
						#has_council = no
					}
				}
			}
			
			# Can't join factions when in blood oath with liege
			OR = {
				is_nomadic = no
				NOT = { has_dlc = "Horse Lords" }
				liege = {
					NOT = { has_blood_oath_with = PREV }
				}
			}
		}
	}	
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		# Will not install old women
		modifier = {
			factor = 0
			new_character = {
				is_female = yes
				age = 40
			}
		}
		
		# Will not install a parent of the current ruler's
		modifier = {
			factor = 0
			new_character = {
				FROM = {
					liege = {
						or = {
							is_father = PREVPREV
							is_mother = PREVPREV
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			NOT = { has_law = succ_feudal_elective }
			current_heir = {
				OR = {
					character = FROM
					ROOT = {
						new_character = {
							character = PREVPREV
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				dynasty = FROM
				religion = FROM
				culture = FROM
			}
			new_character = {
				NOT = { dynasty = FROM }
			}
		}
		
		modifier = {
			factor = 0
			new_character = {
				ROOT = {
					holder_scope = {
						is_child_of = PREVPREV
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			new_character = {
				OR = { 
					NAND = {
						religion = FROM
						culture_group = FROM
					}
					trait = blinded
					trait = eunuch
					trait = incapable
					trait = imbecile
					trait = inbred
				}
			}
		}
		
		modifier = {
			factor = 0
			has_law = succ_feudal_elective
			new_character = {
				character = FROM
				NOR = {
					trait = ambitious
					trait = deceitful
					trait = proud
					has_strong_claim = PREV
				}
			}
		}
		
		modifier = {
			factor = 0
			NOT = { has_law = succ_feudal_elective }
			holder_scope = {
				culture_group = FROM
				religion = FROM
				
				any_war = {
					war_title = ROOT
					defender = { character = THIS } 
					attacker = {
						NAND = {
							culture_group = FROM
							religion = FROM
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_claimant }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_claimant
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			NOT = { new_character = { character = FROM } }
			FROM = {
				has_claim = ROOT
			}
		}
		
		modifier = {
			factor = 0
			NOT = { de_jure_vassal_or_below = FROM }
			holder_scope = {
				any_demesne_title = {
					is_primary_holder_title_tier = yes
					de_jure_vassal_or_below = FROM
					NOT = { title = ROOT }
				}
			}
		}
		
		modifier = {
			factor = 0
			is_conquered = yes
#			NOT = { conquest_culture = FROM }
			NOT = { new_character = { culture = FROM } }
		}
		
		# If there is an antiking faction, prioritize that
		modifier = {
			factor = 0
			FROM = {
				religion = catholic
				top_liege = {
					FROM = {
						liege = {
							character = PREVPREV
						}
					}
					religion = FROM
					rightful_religious_head_scope = {
						has_claim = k_papal_state
					}
					any_realm_lord = {
						in_faction = faction_antiking
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			NOT = {
				new_character = {
					character = FROM
				}
			}
			NOT = {
				new_character = {
					FROM = {
						OR = {
							AND = {
								NOT = { in_faction = faction_claimant }
								opinion_diff = {
									first = PREV
									second = LIEGE
									value = 10 # I like the Claimant more than the current ruler
									as_if_liege = yes
								}
							}
							AND = {
								in_faction = faction_claimant
								opinion_diff = {
									first = PREV
									second = LIEGE
									value = -5
									as_if_liege = yes
								}
							}
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0.1
			is_conquered = yes
			NOT = { conquest_culture = FROM }
			holder_scope = {
				any_vassal = {
					NOT = { character = FROM }
					in_faction = faction_claimant
					faction_claimant = {
						new_character = {
							culture = FROM # If we are subjugated, tend to unite behind one single claimant
							FROM = {
								opinion_diff = {
									first = PREV
									second = LIEGE
									value = 10 # I like the Claimant more than the current ruler
									as_if_liege = yes
								}
							}
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}
		
		modifier = {
			factor = 0.2
			NAND = {
				has_dlc = "Zeus"
				OR = {
					has_law = status_of_women_4
					has_game_rule = {
						name = gender
						value = all
					}
				}
			}
			new_character = {
				is_female = yes
			}
		}
		
		modifier = {
			factor = 0.5
			new_character = {
				NOT = { age = 13 }
			}
		}
		
		modifier = {
			factor = 0.5
			new_character = {
				NOT = { age = 10 }
			}
		}
		
		modifier = {
			factor = 0.5
			new_character = {
				NOT = { age = 5 }
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 3.0
			new_character = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 1.5
			new_character = {
				dynasty = FROM
			}
		}
		modifier = {
			factor = 0.5
			title = e_byzantium
			FROM = { culture_group = byzantine }
			new_character = {
				NOT = { trait = born_in_the_purple }
			}
		}
		
		modifier = {
			factor = 2.0
			title = e_byzantium
			FROM = { culture_group = byzantine }
			new_character = {
				trait = born_in_the_purple
			}
		}
		modifier = {
			factor = 0.5
			title = e_byzantium
			FROM = { culture_group = byzantine }
			holder_scope = {
				trait = born_in_the_purple
			}
		}
		
		modifier = {
			factor = 2.0
			title = e_byzantium
			FROM = { culture_group = byzantine }
			holder_scope = {
				NOT = { trait = born_in_the_purple }
			}
		}
		
		modifier = {
			factor = 2.0
			new_character = {
				trait = sayyid
			}
			holder_scope = {
				NOT = { trait = sayyid }
			}
		}
		modifier = {
			factor = 1.5
			new_character = {
				trait = mirza
			}
			holder_scope = {
				NOR = {
					trait = sayyid 
					trait = mirza 
				}
			}
		}
		
		modifier = {
			factor = 4.0
			is_conquered = yes
			NOT = { conquest_culture = FROM }
			new_character = { culture = FROM }
		}
		
		modifier = {
			factor = 2.0
			holder_scope = {
				dynasty_realm_power = 0.25
			}
			new_character = {
				ROOT = {
					holder_scope = { 
						NOT = { dynasty = PREVPREV }
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			holder_scope = {
				dynasty_realm_power = 0.4
			}
			new_character = {
				ROOT = {
					holder_scope = { 
						NOT = { dynasty = PREVPREV }
					}
				}
			}
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
			OR = {
				is_conquered = no
				conquest_culture = FROM
			}
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}

#			FROMFROM = {
#				new_character = {
#					NOT = { character = ROOT }
#				}
#			}

		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
				new_character = {
					NOT = { character = ROOT }
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = {
				dynasty = ROOT
				religion = ROOT
				culture = ROOT
			}
			FROMFROM = {
				new_character = {
					NOT = { dynasty = ROOT }
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				new_character = {
					OR = {
						NAND = {
							religion = ROOT
							culture_group = ROOT
						}
						trait = blinded
						trait = eunuch
						trait = incapable
						trait = imbecile
						trait = inbred
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = {
				culture_group = ROOT
				religion = ROOT
				any_war = {
					war_title = FROMFROM
					defender = { character = THIS } 
					attacker = {
						NAND = {
							culture_group = ROOT
							religion = ROOT
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				NOT = { de_jure_vassal_or_below = ROOT }
				holder_scope = {
					any_demesne_title = {
						is_primary_holder_title_tier = yes
						de_jure_vassal_or_below = ROOT
						NOT = { title = PREVPREV }
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				is_conquered = yes
#				NOT = { conquest_culture = ROOT }
				NOT = { new_character = { culture = ROOT } }
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				claimed_by = ROOT
				NOT = { new_character = { character = ROOT } }
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_claimant_timer
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		# If there is an antiking faction, prioritize that
		modifier = {
			factor = 0
			religion = catholic
			top_liege = {
				ROOT = {
					liege = {
						character = PREVPREV
					}
				}
				religion = ROOT
				rightful_religious_head_scope = {
					has_claim = k_papal_state

				}
				any_realm_lord = {
					in_faction = faction_antiking
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			NOR = {
				FROMFROM = {
					new_character = {
						OR = {
							character = ROOT
							ROOT = {
								OR = {
									AND = {
										NOT = { in_faction = faction_claimant }
										opinion_diff = {
											first = PREV
											second = LIEGE
											value = 10 # I like the Claimant more than the current ruler
											as_if_liege = yes
										}
									}
									AND = {
										in_faction = faction_claimant
										opinion_diff = {
											first = PREV
											second = LIEGE
											value = -5
											as_if_liege = yes
										}
									}
								}
							}
						}
					}
				}
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 3.0
			FROMFROM = {
				new_character = {
					character = ROOT
				}
			}
		}
		
		modifier = {
			factor = 1.5
			FROMFROM = {
				new_character = {
					dynasty = ROOT
				}
			}
		}
		
		modifier = {
			factor = 0.2
			NAND = {
				has_dlc = "Zeus"
				OR = {
					has_law = status_of_women_4
					has_game_rule = {
						name = gender
						value = all
					}
				}
			}
			FROMFROM = {
				new_character = {
					is_female = yes
					NOT = { character = ROOT }
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.5
			FROMFROM = {
				new_character = {
					NOT = { age = 13 }
					NOT = { character = ROOT }
				}
			}
		}
		
		modifier = {
			factor = 0.5
			FROMFROM = {
				new_character = {
					NOT = { age = 10 }
					NOT = { character = ROOT }
				}
			}
		}
		
		modifier = {
			factor = 0.5
			FROMFROM = {
				new_character = {
					NOT = { age = 5 }
					NOT = { character = ROOT }
				}
			}
		}
		
		modifier = {
			factor = 0.5
			culture_group = byzantine
			FROMFROM = {
				title = e_byzantium
				new_character = {
					NOT = { trait = born_in_the_purple }
				}
			}
		}
		
		modifier = {
			factor = 0.5
			culture_group = byzantine
			FROMFROM = {
				title = e_byzantium
			}
			liege = {
				trait = born_in_the_purple
			}
		}
		
		modifier = {
			factor = 2.0
			culture_group = byzantine
			FROMFROM = {
				title = e_byzantium
				new_character = {
					trait = born_in_the_purple
				}
			}
		}
		
		modifier = {
			factor = 2.0
			culture_group = byzantine
			FROMFROM = {
				title = e_byzantium
			}
			liege = {
				NOT = { trait = born_in_the_purple }
			}
		}
		
		modifier = {
			factor = 2.0
			FROMFROM = {
				new_character = {
					trait = sayyid
				}
			}
			liege = {
				NOT = { trait = sayyid }
			}
		}
		modifier = {
			factor = 1.5
			FROMFROM = {
				new_character = {
					trait = mirza
				}
			}
			liege = {
				NOR = {
					trait = sayyid
					trait = mirza
				}
			}
		}
		
		modifier = {
			factor = 2.0
			FROMFROM = {
				new_character = {
					ROOT = {
						opinion_diff = {
							first = PREV
							second = LIEGE
							value = 40
							as_if_liege = yes
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 2.0
			FROMFROM = {
				new_character = {
					ROOT = {
						opinion_diff = {
							first = PREV
							second = LIEGE
							value = 60
							as_if_liege = yes
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			FROMFROM = {
				OR = {
					is_conquered = no
					conquest_culture = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.25
			}
			FROMFROM = {
				new_character = {
					ROOT = {
						liege = { 
							NOT = { dynasty = PREVPREV }
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.4
			}
			FROMFROM = {
				new_character = {
					ROOT = {
						liege = { 
							NOT = { dynasty = PREVPREV }
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		always = no
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
	}
}

# Antiking Faction
faction_antiking = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	rel_head_loyalist = yes # Members consider the "real" pope to be the rightful religious head
	cancel_on_leader_death = yes # The faction will not automatically continue under a new leader
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = {
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
		religion = catholic
		NOT = { trait = incapable }
		primary_title = { higher_tier_than = COUNT }
		liege = {
			religion = ROOT
			government = nomadic_government
			rightful_religious_head_scope = {
				has_claim = k_papal_state
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		
		NOT = { has_character_modifier = faction_antiking_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		higher_tier_than = DUKE
		is_primary_holder_title = yes

		holder_scope = {
			independent = yes
			NOR = {
				any_war = {
					war_title = ROOT
					using_cb = cb_install_antiking
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
		
		OR = {
			culture = FROM
			holder_scope = {
				culture = FROM
			}
		}
	}
	
	# If false, shows the faction entry for players, but disabled
	player_allow = {
		FROM = {
			piety = 500
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus"}
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = {
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
					}
				}
			}
		}
	}	
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = -10 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 0.25
			NOT = { claimed_by = FROM }
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
				NOT = { religion = FROM }
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_antiking_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			NOR = {
				opinion = { who = FROM value = -40 }
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}	
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -10 } }
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } }
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } }
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		always = no
	}
	
	abort = {
		always = no
	}
	
	abort_effect = {
	}
	
	effect = {
	}
}

# Institute Agnatic Succession in Liege Title
#faction_agnatic_succession = {
#	type = liege_titles
#	
#	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
#	
#	# Plotter scope
#	potential = {
#		prisoner = no
#		is_ruler = yes
#		independent = no
#		mercenary = no
#		holy_order = no
#		is_landed = yes
#		is_adult = yes
#		NOT = { trait = incapable }
#		liege = {
#			is_vice_royalty = no
#			is_feudal = yes 
#			NOT = { religion_group = muslim }
#			NOT = {
#				any_demesne_title = {
#					temporary = yes
#				}
#			}
#		}
#		NOT = { religion_group = muslim }
#		primary_title = { higher_tier_than = BARON }
#		
#		NOT = {
#			in_faction = faction_succ_seniority
#			in_faction = faction_succ_primogeniture
#			in_faction = faction_succ_feudal_elective
#			in_faction = faction_succ_gavelkind
#			in_faction = faction_succ_tanistry
#			in_faction = faction_succ_ultimogeniture
#			in_faction = faction_agnatic_cognatic_succession
#			in_faction = faction_cognatic_succession
#			in_faction = faction_enatic_cognatic_succession
#			in_faction = faction_enatic_succession
#		}
#		
#		OR = {
#			# Is not affected by a Crown Law title
#			NOT = {
#				crownlaw_title = {
#					always = yes
#				}
#			}
#			
#			# The Crown Law title holder is my liege
#			crownlaw_title = {
#				holder_scope = {
#					ROOT = {
#						liege = {
#							character = PREVPREV
#						}
#					}
#				}
#			}
#			
#			# The Crown Law title allows vassal infighting
#			crownlaw_title = {
#				NOT = {
#					OR = {
#						has_law = centralization_2
#						has_law = centralization_3
#						has_law = centralization_4
#					}
#				}
#			}
#		}
#		
#		NOT = { has_character_modifier = faction_agnatic_succession_ultimatum_timer }
#	}
#	
#	# Target scope
#	allow = {
#		OR = {
#			is_primary_holder_title = yes
#			higher_tier_than = DUKE
#		}
#		has_law = cognatic_succession
#		
#		holder_scope = {
#			NOT = {
#				any_war = {
#					war_title = ROOT
#					using_cb = change_agnatic_succession_law
#				}
#			}
#			
#			NOT = {
#				reverse_has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_leaving_faction
#				}
#			}
#		}
#	}
#	
#	# Faction member scope (ROOT = joiner, FROM = target)
#	allow_join = {
#		ROOT = {
#			is_ruler = yes
#			independent = no
#			mercenary = no
#			holy_order = no
#			is_landed = yes
#			is_adult = yes
#			NOT = { trait = incapable }
#			prisoner = no
#			
#			NOT = {
#				religion_group = muslim
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#				in_faction = faction_enatic_succession
#			}			
#		}		
#	}
#	
#	# AI creation weight
#	chance = {
#		factor = 1
#		modifier = {
#			factor = 0.1		#slow it down
#			always = yes
#		}
#		
#		modifier = {
#			factor = 0.2
#			FROM = { pacifist = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { prisoner = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			holder_scope = {
#				any_spouse = { character = FROM }
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			current_heir = {
#				character = FROM
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }
#
#			heir_under_seniority_law = {
#				OR = {
#					ROOT = { current_heir = { character = PREV } } 
#					FROM = {
#						opinion_diff = {
#							first = LIEGE
#							second = PREV
#							value = -25 # I don't like the pretender enough
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				OR = {
#					AND = {
#						NOT = { leads_faction = faction_agnatic_succession }
#						opinion = { who = LIEGE value = 50 } 
#					}
#					AND = {
#						leads_faction = faction_agnatic_succession
#						opinion = { who = LIEGE value = 75 } 
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { preparing_invasion = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { 
#				opinion = { who = LIEGE value = 25 } 
#				NOT = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}			
#			}
#		}		
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				opinion = { who = LIEGE value = 50 } 
#				OR = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}				
#			}
#		}
#		
#		modifier = {
#			factor = 1.5
#			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
#		}
#		modifier = {
#			factor = 2.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
#		}
#		modifier = {
#			factor = 4.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = content }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = imbecile }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = inbred }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = craven }
#		}
#		modifier = {
#			factor = 0.2
#			FROM = {
#				OR = {
#					trait = slow
#					trait = dull
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = kind }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = charitable }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = honest }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = humble }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = just }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = proud }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = brave }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = arbitrary }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = envious }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = greedy }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = impaler }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = deceitful }
#		}
#		modifier = {
#			factor = 4.0
#			FROM = { trait = ambitious }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = {
#				is_female = no
#			}
#		}
#		modifier = {
#			factor = 2.0
#			FROM = {
#				is_female = yes
#			}
#		}
#	}
#	
#	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
#	membership = {
#		factor = 1
#		
#		modifier = {
#			factor = 0.2
#			pacifist = yes
#		}			
#		
#		modifier = {
#			factor = 0
#			OR = {
#				prisoner = yes
#				trait = incapable
#				is_adult = no
#				is_landed = no
#				preparing_invasion = yes
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				current_heir = {
#					character = ROOT
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#				in_faction = faction_enatic_succession
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_character_modifier = faction_agnatic_succession_ultimatum_timer
#		}
#		
#		modifier = {
#			factor = 0
#			liege = { 
#				NOT = { year = 1350 }
#				primary_title = { is_tribal_type_title = yes }
#				culture = ROOT
#				religion = ROOT
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_opinion_modifier = {
#				who = LIEGE
#				modifier = opinion_coerced_into_leaving_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				AND = {
#					NOT = { in_faction = faction_agnatic_succession }
#					opinion = { who = LIEGE value = 50 } 
#				}
#				AND = {
#					in_faction = faction_agnatic_succession
#					opinion = { who = LIEGE value = 75 } 
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		# Try to exclude people who should rather support a claimant
#		modifier = {
#			factor = 0
#			FROM = { # Remember: the faction leader is also the person who would inherit under this law
#				OR = {
#					NOT = { culture = ROOT }
#					NOT = { religion = ROOT }
#				}
#				liege = {
#					any_demesne_title = {
#						OR = {
#							is_primary_holder_title = yes
#							higher_tier_than = DUKE
#						}
#						ROOT = {
#							primary_title = {
#								de_jure_liege_or_above = PREVPREV
#							}
#						}
#						any_claimant = {
#							culture = ROOT
#							religion = ROOT
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				heir_under_agnatic_law = {
#					ROOT = {
#						OR = {
#							AND = {
#								NOT = { in_faction = faction_agnatic_succession }
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = -10 # I don't like the pretender enough
#									as_if_liege = yes
#								}
#							}
#							AND = {
#								in_faction = faction_agnatic_succession
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = 10
#									as_if_liege = yes
#								}
#							}
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 1000
#			has_opinion_modifier = {
#				who = FROM
#				modifier = opinion_coerced_into_joining_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 25 } 
#			NOT = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}		
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 50 } 
#			OR = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}
#		
#		modifier = {
#			factor = 2
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						opinion_diff = {
#							first = PREV
#							second = LIEGE
#							value = 25
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0.01
#			trait = content
#		}
#		modifier = {
#			factor = 0.01
#			trait = imbecile
#		}
#		modifier = {
#			factor = 0.1
#			trait = inbred
#		}
#		modifier = {
#			factor = 0.1
#			trait = craven
#		}
#		modifier = {
#			factor = 0.2
#			OR = {
#				trait = slow
#				trait = dull
#			}
#		}
#		modifier = {
#			factor = 0.5
#			trait = kind
#		}
#		modifier = {
#			factor = 0.5
#			trait = charitable
#		}
#		modifier = {
#			factor = 0.5
#			trait = honest
#		}
#		modifier = {
#			factor = 0.75
#			trait = humble
#		}
#		modifier = {
#			factor = 0.75
#			trait = just
#		}
#		modifier = {
#			factor = 1.5
#			trait = proud
#		}
#		modifier = {
#			factor = 1.5
#			trait = brave
#		}
#		modifier = {
#			factor = 1.5
#			trait = arbitrary
#		}
#		modifier = {
#			factor = 2.0
#			trait = envious
#		}
#		modifier = {
#			factor = 2.0
#			trait = greedy
#		}
#		modifier = {
#			factor = 2.0
#			trait = impaler
#		}
#		modifier = {
#			factor = 2.0
#			trait = deceitful
#		}
#		modifier = {
#			factor = 4.0
#			trait = ambitious
#		}
#		modifier = {
#			factor = 2.0
#			is_female = no
#		}
#		modifier = {
#			factor = 0.5
#			is_female = yes
#		}
#	}
#	
#	success = {
#		has_law = agnatic_succession
#	}
#	
#	abort = {
#		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
#	}
#	
#	abort_effect = {
#	}
#	
#	effect = {
#		FROM = {
#			any_faction_backer = {
#				faction = faction_agnatic_succession
#				reverse_opinion = {
#					modifier = opinion_grateful
#					who = FROM
#					years = 5
#				}
#			}
#		}
#	}
#}

# Institute Agnatic-Cognatic Succession in Liege Title
#faction_agnatic_cognatic_succession = {
#	type = liege_titles
#	
#	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
#	
#	# Plotter scope
#	potential = {
#		prisoner = no
#		is_ruler = yes
#		independent = no
#		mercenary = no
#		holy_order = no
#		is_landed = yes
#		is_adult = yes
#		NOT = { trait = incapable }
#		liege = {
#			is_vice_royalty = no
#			is_feudal = yes 
#			NOT = { religion_group = muslim }
#			NOT = {
#				any_demesne_title = {
#					temporary = yes
#				}
#			}
#		}
#		primary_title = { higher_tier_than = BARON }
#		
#		NOT = {
#			in_faction = faction_succ_seniority
#			in_faction = faction_succ_primogeniture
#			in_faction = faction_succ_feudal_elective
#			in_faction = faction_succ_gavelkind
#			in_faction = faction_succ_tanistry
#			in_faction = faction_succ_ultimogeniture
#			in_faction = faction_agnatic_succession
#			in_faction = faction_cognatic_succession
#			in_faction = faction_enatic_cognatic_succession
#			in_faction = faction_enatic_succession
#		}
#		
#		OR = {
#			# Is not affected by a Crown Law title
#			NOT = {
#				crownlaw_title = {
#					always = yes
#				}
#			}
#			
#			# The Crown Law title holder is my liege
#			crownlaw_title = {
#				holder_scope = {
#					ROOT = {
#						liege = {
#							character = PREVPREV
#						}
#					}
#				}
#			}
#			
#			# The Crown Law title allows vassal infighting
#			crownlaw_title = {
#				NOT = {
#					OR = {
#						has_law = centralization_2
#						has_law = centralization_3
#						has_law = centralization_4
#					}
#				}
#			}
#		}
#		
#		NOT = { has_character_modifier = faction_agnatic_cognatic_succession_ultimatum_timer }
#	}
#	
#	# Target scope
#	allow = {
#		OR = {
#			is_primary_holder_title = yes
#			higher_tier_than = DUKE
#		}
#		OR = {
#			has_law = agnatic_succession
#			has_law = true_cognatic_succession
#		}
#		
#		holder_scope = {
#			NOT = {
#				any_war = {
#					war_title = ROOT
#					using_cb = change_agnatic_cognatic_succession_law
#				}
#			}
#			
#			NOT = {
#				reverse_has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_leaving_faction
#				}
#			}
#		}
#	}
#	
#	# Faction member scope (ROOT = joiner, FROM = target)
#	allow_join = {
#		ROOT = {
#			is_ruler = yes
#			independent = no
#			mercenary = no
#			holy_order = no
#			is_landed = yes
#			is_adult = yes
#			NOT = { trait = incapable }
#			prisoner = no
#			
#			NOT = {
#				religion_group = muslim
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#				in_faction = faction_enatic_succession
#			}			
#		}		
#	}
#	
#	# AI creation weight
#	chance = {
#		factor = 1
#		modifier = {
#			factor = 0.1		#slow it down
#			always = yes
#		}
#		
#		modifier = {
#			factor = 0.2
#			FROM = { pacifist = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { prisoner = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			holder_scope = {
#				any_spouse = { character = FROM }
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			current_heir = {
#				character = FROM
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }
#
#			heir_under_seniority_law = {
#				OR = {
#					ROOT = { current_heir = { character = PREV } } 
#					FROM = {
#						opinion_diff = {
#							first = LIEGE
#							second = PREV
#							value = -25 # I don't like the pretender enough
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				OR = {
#					AND = {
#						NOT = { leads_faction = faction_agnatic_cognatic_succession }
#						opinion = { who = LIEGE value = 50 } 
#					}
#					AND = {
#						leads_faction = faction_agnatic_cognatic_succession
#						opinion = { who = LIEGE value = 75 } 
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { preparing_invasion = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { 
#				opinion = { who = LIEGE value = 25 } 
#				NOT = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}			
#			}
#		}		
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				opinion = { who = LIEGE value = 50 } 
#				OR = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}				
#			}
#		}
#		
#		modifier = {
#			factor = 1.5
#			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
#		}
#		modifier = {
#			factor = 2.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
#		}
#		modifier = {
#			factor = 4.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = content }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = imbecile }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = inbred }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = craven }
#		}
#		modifier = {
#			factor = 0.2
#			FROM = {
#				OR = {
#					trait = slow
#					trait = dull
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = kind }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = charitable }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = honest }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = humble }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = just }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = proud }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = brave }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = arbitrary }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = envious }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = greedy }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = impaler }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = deceitful }
#		}
#		modifier = {
#			factor = 4.0
#			FROM = { trait = ambitious }
#		}
#		modifier = {
#			factor = 2.0
#			OR = {
#				AND = {
#					has_law = true_cognatic_succession
#					FROM = {
#						is_female = no
#					}
#				}
#				AND = {
#					has_law = agnatic_succession
#					FROM = {
#						is_female = yes
#					}
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			OR = {
#				AND = {
#					has_law = true_cognatic_succession
#					FROM = {
#						is_female = yes
#					}
#				}
#				AND = {
#					has_law = agnatic_succession
#					FROM = {
#						is_female = no
#					}
#				}
#			}
#		}
#	}
#	
#	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
#	membership = {
#		factor = 1
#		
#		modifier = {
#			factor = 0.2
#			pacifist = yes
#		}			
#		
#		modifier = {
#			factor = 0
#			OR = {
#				prisoner = yes
#				trait = incapable
#				is_adult = no
#				is_landed = no
#				preparing_invasion = yes
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				current_heir = {
#					character = ROOT
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#				in_faction = faction_enatic_succession
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_character_modifier = faction_agnatic_cognatic_succession_ultimatum_timer
#		}
#		
#		modifier = {
#			factor = 0
#			liege = { 
#				NOT = { year = 1350 }
#				primary_title = { is_tribal_type_title = yes }
#				culture = ROOT
#				religion = ROOT
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_opinion_modifier = {
#				who = LIEGE
#				modifier = opinion_coerced_into_leaving_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				AND = {
#					NOT = { in_faction = faction_agnatic_cognatic_succession }
#					opinion = { who = LIEGE value = 50 } 
#				}
#				AND = {
#					in_faction = faction_agnatic_cognatic_succession
#					opinion = { who = LIEGE value = 75 } 
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		# Try to exclude people who should rather support a claimant
#		modifier = {
#			factor = 0
#			FROM = { # Remember: the faction leader is also the person who would inherit under this law
#				OR = {
#					NOT = { culture = ROOT }
#					NOT = { religion = ROOT }
#				}
#				liege = {
#					any_demesne_title = {
#						OR = {
#							is_primary_holder_title = yes
#							higher_tier_than = DUKE
#						}
#						ROOT = {
#							primary_title = {
#								de_jure_liege_or_above = PREVPREV
#							}
#						}
#						any_claimant = {
#							culture = ROOT
#							religion = ROOT
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						OR = {
#							AND = {
#								NOT = { in_faction = faction_succ_seniority }
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = -10 # I don't like the pretender enough
#									as_if_liege = yes
#								}
#							}
#							AND = {
#								in_faction = faction_succ_seniority
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = 10
#									as_if_liege = yes
#								}
#							}
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 1000
#			has_opinion_modifier = {
#				who = FROM
#				modifier = opinion_coerced_into_joining_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 25 } 
#			NOT = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}		
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 50 } 
#			OR = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}
#		
#		modifier = {
#			factor = 2
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						opinion_diff = {
#							first = PREV
#							second = LIEGE
#							value = 25
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0.01
#			trait = content
#		}
#		modifier = {
#			factor = 0.01
#			trait = imbecile
#		}
#		modifier = {
#			factor = 0.1
#			trait = inbred
#		}
#		modifier = {
#			factor = 0.1
#			trait = craven
#		}
#		modifier = {
#			factor = 0.2
#			OR = {
#				trait = slow
#				trait = dull
#			}
#		}
#		modifier = {
#			factor = 0.5
#			trait = kind
#		}
#		modifier = {
#			factor = 0.5
#			trait = charitable
#		}
#		modifier = {
#			factor = 0.5
#			trait = honest
#		}
#		modifier = {
#			factor = 0.75
#			trait = humble
#		}
#		modifier = {
#			factor = 0.75
#			trait = just
#		}
#		modifier = {
#			factor = 1.5
#			trait = proud
#		}
#		modifier = {
#			factor = 1.5
#			trait = brave
#		}
#		modifier = {
#			factor = 1.5
#			trait = arbitrary
#		}
#		modifier = {
#			factor = 2.0
#			trait = envious
#		}
#		modifier = {
#			factor = 2.0
#			trait = greedy
#		}
#		modifier = {
#			factor = 2.0
#			trait = impaler
#		}
#		modifier = {
#			factor = 2.0
#			trait = deceitful
#		}
#		modifier = {
#			factor = 4.0
#			trait = ambitious
#		}
#		modifier = {
#			factor = 2.0
#			OR = {
#				AND = {
#					is_female = no
#					FROMFROM = {
#						has_law = true_cognatic_succession
#					}
#				}
#				AND = {
#					is_female = yes
#					FROMFROM = {
#						has_law = agnatic_succession
#					}
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			OR = {
#				AND = {
#					is_female = yes
#					FROMFROM = {
#						has_law = true_cognatic_succession
#					}
#				}
#				AND = {
#					is_female = no
#					FROMFROM = {
#						has_law = agnatic_succession
#					}
#				}
#			}
#		}
#	}
#	
#	success = {
#		has_law = cognatic_succession
#	}
#	
#	abort = {
#		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
#	}
#	
#	abort_effect = {
#	}
#	
#	effect = {
#		FROM = {
#			any_faction_backer = {
#				faction = faction_agnatic_cognatic_succession
#				reverse_opinion = {
#					modifier = opinion_grateful
#					who = FROM
#					years = 5
#				}
#			}
#		}
#	}
#}

# Institute Cognatic Succession in Liege Title
#faction_cognatic_succession = {
#	type = liege_titles
#	
#	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
#	
#	# Plotter scope
#	potential = {
#		prisoner = no
#		is_ruler = yes
#		independent = no
#		mercenary = no
#		holy_order = no
#		is_landed = yes
#		is_adult = yes
#		NOT = { trait = incapable }
#		liege = {
#			is_vice_royalty = no
#			is_feudal = yes 
#			NOT = { religion_group = muslim }
#			NOT = {
#				any_demesne_title = {
#					temporary = yes
#				}
#			}
#		}
#		NOT = { religion_group = muslim }
#		primary_title = { higher_tier_than = BARON }
#		
#		NOT = {
#			in_faction = faction_succ_seniority
#			in_faction = faction_succ_primogeniture
#			in_faction = faction_succ_feudal_elective
#			in_faction = faction_succ_gavelkind
#			in_faction = faction_succ_tanistry
#			in_faction = faction_succ_ultimogeniture
#			in_faction = faction_agnatic_succession
#			in_faction = faction_agnatic_cognatic_succession
#			in_faction = faction_enatic_cognatic_succession
#			in_faction = faction_enatic_succession
#		}
#		
#		OR = {
#			# Is not affected by a Crown Law title
#			NOT = {
#				crownlaw_title = {
#					always = yes
#				}
#			}
#			
#			# The Crown Law title holder is my liege
#			crownlaw_title = {
#				holder_scope = {
#					ROOT = {
#						liege = {
#							character = PREVPREV
#						}
#					}
#				}
#			}
#			
#			# The Crown Law title allows vassal infighting
#			crownlaw_title = {
#				NOT = {
#					OR = {
#						has_law = centralization_2
#						has_law = centralization_3
#						has_law = centralization_4
#					}
#				}
#			}
#		}
#		
#		NOT = { has_character_modifier = faction_cognatic_succession_ultimatum_timer }
#	}
#	
#	# Target scope
#	allow = {
#		OR = {
#			is_primary_holder_title = yes
#			higher_tier_than = DUKE
#		}
#		OR = { 
#			has_law = cognatic_succession
#			has_law = enatic_cognatic_succession
#		}
#		
#		holder_scope = {
#			NOT = {
#				any_war = {
#					war_title = ROOT
#					using_cb = change_cognatic_succession_law
#				}
#			}
#			
#			NOT = {
#				reverse_has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_leaving_faction
#				}
#			}
#		}
#	}
#	
#	# Faction member scope (ROOT = joiner, FROM = target)
#	allow_join = {
#		ROOT = {
#			is_ruler = yes
#			independent = no
#			mercenary = no
#			holy_order = no
#			is_landed = yes
#			is_adult = yes
#			NOT = { trait = incapable }
#			prisoner = no
#			
#			NOT = {
#				religion_group = muslim
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#				in_faction = faction_enatic_succession
#			}			
#		}		
#	}
#	
#	# AI creation weight
#	chance = {
#		factor = 1
#		modifier = {
#			factor = 0.1		#slow it down
#			always = yes
#		}
#		
#		modifier = {
#			factor = 0.2
#			FROM = { pacifist = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { prisoner = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			holder_scope = {
#				any_spouse = { character = FROM }
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			current_heir = {
#				character = FROM
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }
#
#			heir_under_seniority_law = {
#				OR = {
#					ROOT = { current_heir = { character = PREV } } 
#					FROM = {
#						opinion_diff = {
#							first = LIEGE
#							second = PREV
#							value = -25 # I don't like the pretender enough
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				OR = {
#					AND = {
#						NOT = { leads_faction = faction_cognatic_succession }
#						opinion = { who = LIEGE value = 50 } 
#					}
#					AND = {
#						leads_faction = faction_cognatic_succession
#						opinion = { who = LIEGE value = 75 } 
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { preparing_invasion = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { 
#				opinion = { who = LIEGE value = 25 } 
#				NOT = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}			
#			}
#		}		
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				opinion = { who = LIEGE value = 50 } 
#				OR = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}				
#			}
#		}
#		
#		modifier = {
#			factor = 1.5
#			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
#		}
#		modifier = {
#			factor = 2.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
#		}
#		modifier = {
#			factor = 4.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = content }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = imbecile }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = inbred }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = craven }
#		}
#		modifier = {
#			factor = 0.2
#			FROM = {
#				OR = {
#					trait = slow
#					trait = dull
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = kind }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = charitable }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = honest }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = humble }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = just }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = proud }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = brave }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = arbitrary }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = envious }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = greedy }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = impaler }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = deceitful }
#		}
#		modifier = {
#			factor = 4.0
#			FROM = { trait = ambitious }
#		}
#		modifier = {
#			factor = 2.0
#			OR = {
#				AND = {
#					has_law = enatic_cognatic_succession
#					FROM = {
#						is_female = no
#					}
#				}
#				AND = {
#					has_law = cognatic_succession
#					FROM = {
#						is_female = yes
#					}
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			OR = {
#				AND = {
#					has_law = enatic_cognatic_succession
#					FROM = {
#						is_female = yes
#					}
#				}
#				AND = {
#					has_law = cognatic_succession
#					FROM = {
#						is_female = no
#					}
#				}
#			}
#		}
#	}
#	
#	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
#	membership = {
#		factor = 1
#		
#		modifier = {
#			factor = 0.2
#			pacifist = yes
#		}			
#		
#		modifier = {
#			factor = 0
#			OR = {
#				prisoner = yes
#				trait = incapable
#				is_adult = no
#				is_landed = no
#				preparing_invasion = yes
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				current_heir = {
#					character = ROOT
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#				in_faction = faction_enatic_succession
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_character_modifier = faction_cognatic_succession_ultimatum_timer
#		}
#		
#		modifier = {
#			factor = 0
#			liege = { 
#				NOT = { year = 1350 }
#				primary_title = { is_tribal_type_title = yes }
#				culture = ROOT
#				religion = ROOT
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_opinion_modifier = {
#				who = LIEGE
#				modifier = opinion_coerced_into_leaving_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				AND = {
#					NOT = { in_faction = faction_cognatic_succession }
#					opinion = { who = LIEGE value = 50 } 
#				}
#				AND = {
#					in_faction = faction_cognatic_succession
#					opinion = { who = LIEGE value = 75 } 
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		# Try to exclude people who should rather support a claimant
#		modifier = {
#			factor = 0
#			FROM = { # Remember: the faction leader is also the person who would inherit under this law
#				OR = {
#					NOT = { culture = ROOT }
#					NOT = { religion = ROOT }
#				}
#				liege = {
#					any_demesne_title = {
#						OR = {
#							is_primary_holder_title = yes
#							higher_tier_than = DUKE
#						}
#						ROOT = {
#							primary_title = {
#								de_jure_liege_or_above = PREVPREV
#							}
#						}
#						any_claimant = {
#							culture = ROOT
#							religion = ROOT
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						OR = {
#							AND = {
#								NOT = { in_faction = faction_succ_seniority }
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = -10 # I don't like the pretender enough
#									as_if_liege = yes
#								}
#							}
#							AND = {
#								in_faction = faction_succ_seniority
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = 10
#									as_if_liege = yes
#								}
#							}
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 1000
#			has_opinion_modifier = {
#				who = FROM
#				modifier = opinion_coerced_into_joining_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 25 } 
#			NOT = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}		
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 50 } 
#			OR = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}
#		
#		modifier = {
#			factor = 2
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						opinion_diff = {
#							first = PREV
#							second = LIEGE
#							value = 25
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0.01
#			trait = content
#		}
#		modifier = {
#			factor = 0.01
#			trait = imbecile
#		}
#		modifier = {
#			factor = 0.1
#			trait = inbred
#		}
#		modifier = {
#			factor = 0.1
#			trait = craven
#		}
#		modifier = {
#			factor = 0.2
#			OR = {
#				trait = slow
#				trait = dull
#			}
#		}
#		modifier = {
#			factor = 0.5
#			trait = kind
#		}
#		modifier = {
#			factor = 0.5
#			trait = charitable
#		}
#		modifier = {
#			factor = 0.5
#			trait = honest
#		}
#		modifier = {
#			factor = 0.75
#			trait = humble
#		}
#		modifier = {
#			factor = 0.75
#			trait = just
#		}
#		modifier = {
#			factor = 1.5
#			trait = proud
#		}
#		modifier = {
#			factor = 1.5
#			trait = brave
#		}
#		modifier = {
#			factor = 1.5
#			trait = arbitrary
#		}
#		modifier = {
#			factor = 2.0
#			trait = envious
#		}
#		modifier = {
#			factor = 2.0
#			trait = greedy
#		}
#		modifier = {
#			factor = 2.0
#			trait = impaler
#		}
#		modifier = {
#			factor = 2.0
#			trait = deceitful
#		}
#		modifier = {
#			factor = 4.0
#			trait = ambitious
#		}
#		modifier = {
#			factor = 2.0
#			OR = {
#				AND = {
#					is_female = no
#					FROMFROM = {
#						has_law = enatic_cognatic_succession
#					}
#				}
#				AND = {
#					is_female = yes
#					FROMFROM = {
#						has_law = cognatic_succession
#					}
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			OR = {
#				AND = {
#					is_female = yes
#					FROMFROM = {
#						has_law = enatic_cognatic_succession
#					}
#				}
#				AND = {
#					is_female = no
#					FROMFROM = {
#						has_law = cognatic_succession
#					}
#				}
#			}
#		}
#	}
#	
#	success = {
#		has_law = true_cognatic_succession
#	}
#	
#	abort = {
#		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
#	}
#	
#	abort_effect = {
#	}
#	
#	effect = {
#		FROM = {
#			any_faction_backer = {
#				faction = faction_cognatic_succession
#				reverse_opinion = {
#					modifier = opinion_grateful
#					who = FROM
#					years = 5
#				}
#			}
#		}
#	}
#}

# Institute Enatic-Cognatic Succession in Liege Title
#faction_enatic_cognatic_succession = {
#	type = liege_titles
#	
#	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
#	
#	# Plotter scope
#	potential = {
#		prisoner = no
#		is_ruler = yes
#		independent = no
#		mercenary = no
#		holy_order = no
#		is_landed = yes
#		is_adult = yes
#		NOT = { trait = incapable }
#		liege = {
#			is_vice_royalty = no
#			is_feudal = yes 
#			NOT = { religion_group = muslim }
#			NOT = {
#				any_demesne_title = {
#					temporary = yes
#				}
#			}
#		}
#		NOT = { religion_group = muslim }
#		primary_title = { higher_tier_than = BARON }
#		
#		NOT = {
#			in_faction = faction_succ_seniority
#			in_faction = faction_succ_primogeniture
#			in_faction = faction_succ_feudal_elective
#			in_faction = faction_succ_gavelkind
#			in_faction = faction_succ_tanistry
#			in_faction = faction_succ_ultimogeniture
#			in_faction = faction_agnatic_succession
#			in_faction = faction_agnatic_cognatic_succession
#			in_faction = faction_cognatic_succession
#			in_faction = faction_enatic_succession
#		}
#		
#		OR = {
#			# Is not affected by a Crown Law title
#			NOT = {
#				crownlaw_title = {
#					always = yes
#				}
#			}
#			
#			# The Crown Law title holder is my liege
#			crownlaw_title = {
#				holder_scope = {
#					ROOT = {
#						liege = {
#							character = PREVPREV
#						}
#					}
#				}
#			}
#			
#			# The Crown Law title allows vassal infighting
#			crownlaw_title = {
#				NOT = {
#					OR = {
#						has_law = centralization_2
#						has_law = centralization_3
#						has_law = centralization_4
#					}
#				}
#			}
#		}
#		
#		NOT = { has_character_modifier = faction_enatic_cognatic_succession_ultimatum_timer }
#	}
#	
#	# Target scope
#	allow = {
#		OR = {
#			is_primary_holder_title = yes
#			higher_tier_than = DUKE
#		}
#		OR = {
#			has_law = true_cognatic_succession
#			has_law = enatic_succession
#		}
#		
#		holder_scope = {
#			NOT = {
#				any_war = {
#					war_title = ROOT
#					using_cb = change_enatic_cognatic_succession_law
#				}
#			}
#			
#			NOT = {
#				reverse_has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_leaving_faction
#				}
#			}
#		}
#	}
#	
#	# Faction member scope (ROOT = joiner, FROM = target)
#	allow_join = {
#		ROOT = {
#			is_ruler = yes
#			independent = no
#			is_landed = yes
#			is_adult = yes
#			NOT = { trait = incapable }
#			prisoner = no
#			
#			NOT = {
#				religion_group = muslim
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_succession
#			}			
#		}		
#	}
#	
#	# AI creation weight
#	chance = {
#		factor = 1
#		modifier = {
#			factor = 0.1		#slow it down
#			always = yes
#		}
#		
#		modifier = {
#			factor = 0.2
#			FROM = { pacifist = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { prisoner = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			holder_scope = {
#				any_spouse = { character = FROM }
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			current_heir = {
#				character = FROM
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }
#
#			heir_under_seniority_law = {
#				OR = {
#					ROOT = { current_heir = { character = PREV } } 
#					FROM = {
#						opinion_diff = {
#							first = LIEGE
#							second = PREV
#							value = -25 # I don't like the pretender enough
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				OR = {
#					AND = {
#						NOT = { leads_faction = faction_enatic_cognatic_succession }
#						opinion = { who = LIEGE value = 50 } 
#					}
#					AND = {
#						leads_faction = faction_enatic_cognatic_succession
#						opinion = { who = LIEGE value = 75 } 
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { preparing_invasion = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { 
#				opinion = { who = LIEGE value = 25 } 
#				NOT = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}			
#			}
#		}		
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				opinion = { who = LIEGE value = 50 } 
#				OR = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}				
#			}
#		}
#		
#		modifier = {
#			factor = 1.5
#			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
#		}
#		modifier = {
#			factor = 2.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
#		}
#		modifier = {
#			factor = 4.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = content }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = imbecile }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = inbred }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = craven }
#		}
#		modifier = {
#			factor = 0.2
#			FROM = {
#				OR = {
#					trait = slow
#					trait = dull
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = kind }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = charitable }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = honest }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = humble }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = just }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = proud }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = brave }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = arbitrary }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = envious }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = greedy }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = impaler }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = deceitful }
#		}
#		modifier = {
#			factor = 4.0
#			FROM = { trait = ambitious }
#		}
#		modifier = {
#			factor = 2.0
#			OR = {
#				AND = {
#					has_law = enatic_succession
#					FROM = {
#						is_female = no
#					}
#				}
#				AND = {
#					has_law = true_cognatic_succession
#					FROM = {
#						is_female = yes
#					}
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			OR = {
#				AND = {
#					has_law = enatic_succession
#					FROM = {
#						is_female = yes
#					}
#				}
#				AND = {
#					has_law = true_cognatic_succession
#					FROM = {
#						is_female = no
#					}
#				}
#			}
#		}
#	}
#	
#	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
#	membership = {
#		factor = 1
#		
#		modifier = {
#			factor = 0.2
#			pacifist = yes
#		}			
#		
#		modifier = {
#			factor = 0
#			OR = {
#				prisoner = yes
#				trait = incapable
#				is_adult = no
#				is_landed = no
#				preparing_invasion = yes
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				current_heir = {
#					character = ROOT
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_succession
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_character_modifier = faction_enatic_cognatic_succession_ultimatum_timer
#		}
#		
#		modifier = {
#			factor = 0
#			liege = { 
#				NOT = { year = 1350 }
#				primary_title = { is_tribal_type_title = yes }
#				culture = ROOT
#				religion = ROOT
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_opinion_modifier = {
#				who = LIEGE
#				modifier = opinion_coerced_into_leaving_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				AND = {
#					NOT = { in_faction = faction_enatic_cognatic_succession }
#					opinion = { who = LIEGE value = 50 } 
#				}
#				AND = {
#					in_faction = faction_enatic_cognatic_succession
#					opinion = { who = LIEGE value = 75 } 
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		# Try to exclude people who should rather support a claimant
#		modifier = {
#			factor = 0
#			FROM = { # Remember: the faction leader is also the person who would inherit under this law
#				OR = {
#					NOT = { culture = ROOT }
#					NOT = { religion = ROOT }
#				}
#				liege = {
#					any_demesne_title = {
#						OR = {
#							is_primary_holder_title = yes
#							higher_tier_than = DUKE
#						}
#						ROOT = {
#							primary_title = {
#								de_jure_liege_or_above = PREVPREV
#							}
#						}
#						any_claimant = {
#							culture = ROOT
#							religion = ROOT
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						OR = {
#							AND = {
#								NOT = { in_faction = faction_succ_seniority }
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = -10 # I don't like the pretender enough
#									as_if_liege = yes
#								}
#							}
#							AND = {
#								in_faction = faction_succ_seniority
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = 10
#									as_if_liege = yes
#								}
#							}
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 1000
#			has_opinion_modifier = {
#				who = FROM
#				modifier = opinion_coerced_into_joining_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 25 } 
#			NOT = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}		
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 50 } 
#			OR = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}
#		
#		modifier = {
#			factor = 2
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						opinion_diff = {
#							first = PREV
#							second = LIEGE
#							value = 25
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0.01
#			trait = content
#		}
#		modifier = {
#			factor = 0.01
#			trait = imbecile
#		}
#		modifier = {
#			factor = 0.1
#			trait = inbred
#		}
#		modifier = {
#			factor = 0.1
#			trait = craven
#		}
#		modifier = {
#			factor = 0.2
#			OR = {
#				trait = slow
#				trait = dull
#			}
#		}
#		modifier = {
#			factor = 0.5
#			trait = kind
#		}
#		modifier = {
#			factor = 0.5
#			trait = charitable
#		}
#		modifier = {
#			factor = 0.5
#			trait = honest
#		}
#		modifier = {
#			factor = 0.75
#			trait = humble
#		}
#		modifier = {
#			factor = 0.75
#			trait = just
#		}
#		modifier = {
#			factor = 1.5
#			trait = proud
#		}
#		modifier = {
#			factor = 1.5
#			trait = brave
#		}
#		modifier = {
#			factor = 1.5
#			trait = arbitrary
#		}
#		modifier = {
#			factor = 2.0
#			trait = envious
#		}
#		modifier = {
#			factor = 2.0
#			trait = greedy
#		}
#		modifier = {
#			factor = 2.0
#			trait = impaler
#		}
#		modifier = {
#			factor = 2.0
#			trait = deceitful
#		}
#		modifier = {
#			factor = 4.0
#			trait = ambitious
#		}
#		modifier = {
#			factor = 2.0
#			OR = {
#				AND = {
#					is_female = no
#					FROMFROM = {
#						has_law = enatic_succession
#					}
#				}
#				AND = {
#					is_female = yes
#					FROMFROM = {
#						has_law = true_cognatic_succession
#					}
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			OR = {
#				AND = {
#					is_female = yes
#					FROMFROM = {
#						has_law = enatic_succession
#					}
#				}
#				AND = {
#					is_female = no
#					FROMFROM = {
#						has_law = true_cognatic_succession
#					}
#				}
#			}
#		}
#	}
#	
#	success = {
#		has_law = enatic_cognatic_succession
#	}
#	
#	abort = {
#		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
#	}
#	
#	abort_effect = {
#	}
#	
#	effect = {
#		FROM = {
#			any_faction_backer = {
#				faction = faction_enatic_cognatic_succession
#				reverse_opinion = {
#					modifier = opinion_grateful
#					who = FROM
#					years = 5
#				}
#			}
#		}
#	}
#}

# Institute Enatic Succession in Liege Title
#faction_enatic_succession = {
#	type = liege_titles
#	
#	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
#	
#	# Plotter scope
#	potential = {
#		prisoner = no
#		is_ruler = yes
#		independent = no
#		mercenary = no
#		holy_order = no
#		is_landed = yes
#		is_adult = yes
#		NOT = { trait = incapable }
#		liege = {
#			is_vice_royalty = no
#			is_feudal = yes 
#			NOT = { religion_group = muslim }
#			NOT = {
#				any_demesne_title = {
#					temporary = yes
#				}
#			}
#		}
#		primary_title = { higher_tier_than = BARON }
#		
#		NOT = {
#			in_faction = faction_succ_seniority
#			in_faction = faction_succ_primogeniture
#			in_faction = faction_succ_feudal_elective
#			in_faction = faction_succ_gavelkind
#			in_faction = faction_succ_tanistry
#			in_faction = faction_succ_ultimogeniture
#			in_faction = faction_agnatic_succession
#			in_faction = faction_agnatic_cognatic_succession
#			in_faction = faction_cognatic_succession
#			in_faction = faction_enatic_cognatic_succession
#		}
#		
#		OR = {
#			# Is not affected by a Crown Law title
#			NOT = {
#				crownlaw_title = {
#					always = yes
#				}
#			}
#			
#			# The Crown Law title holder is my liege
#			crownlaw_title = {
#				holder_scope = {
#					ROOT = {
#						liege = {
#							character = PREVPREV
#						}
#					}
#				}
#			}
#			
#			# The Crown Law title allows vassal infighting
#			crownlaw_title = {
#				NOT = {
#					OR = {
#						has_law = centralization_2
#						has_law = centralization_3
#						has_law = centralization_4
#					}
#				}
#			}
#		}
#		
#		NOT = { has_character_modifier = faction_enatic_succession_ultimatum_timer }
#	}
#	
#	# Target scope
#	allow = {
#		OR = {
#			is_primary_holder_title = yes
#			higher_tier_than = DUKE
#		}
#		has_law = enatic_cognatic_succession
#		
#		holder_scope = {
#			NOT = {
#				any_war = {
#					war_title = ROOT
#					using_cb = change_enatic_succession_law
#				}
#			}
#			
#			NOT = {
#				reverse_has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_leaving_faction
#				}
#			}
#		}
#	}
#	
#	# Faction member scope (ROOT = joiner, FROM = target)
#	allow_join = {
#		ROOT = {
#			is_ruler = yes
#			independent = no
#			mercenary = no
#			holy_order = no
#			is_landed = yes
#			is_adult = yes
#			NOT = { trait = incapable }
#			prisoner = no
#			
#			NOT = {
#				religion_group = muslim
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#			}			
#		}		
#	}
#	
#	# AI creation weight
#	chance = {
#		factor = 1
#		modifier = {
#			factor = 0.1		#slow it down
#			always = yes
#		}
#		
#		modifier = {
#			factor = 0.2
#			FROM = { pacifist = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { prisoner = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			holder_scope = {
#				any_spouse = { character = FROM }
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			current_heir = {
#				character = FROM
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }
#
#			heir_under_seniority_law = {
#				OR = {
#					ROOT = { current_heir = { character = PREV } } 
#					FROM = {
#						opinion_diff = {
#							first = LIEGE
#							second = PREV
#							value = -25 # I don't like the pretender enough
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				OR = {
#					AND = {
#						NOT = { leads_faction = faction_enatic_succession }
#						opinion = { who = LIEGE value = 50 } 
#					}
#					AND = {
#						leads_faction = faction_enatic_succession
#						opinion = { who = LIEGE value = 75 } 
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { preparing_invasion = yes }
#		}
#		
#		modifier = {
#			factor = 0
#			FROM = { 
#				opinion = { who = LIEGE value = 25 } 
#				NOT = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}			
#			}
#		}		
#		
#		modifier = {
#			factor = 0
#			FROM = {
#				opinion = { who = LIEGE value = 50 } 
#				OR = {
#					trait = deceitful
#					trait = ambitious
#					trait = envious
#				}				
#			}
#		}
#		
#		modifier = {
#			factor = 1.5
#			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
#		}
#		modifier = {
#			factor = 2.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
#		}
#		modifier = {
#			factor = 4.0
#			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = content }
#		}
#		modifier = {
#			factor = 0.01
#			FROM = { trait = imbecile }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = inbred }
#		}
#		modifier = {
#			factor = 0.1
#			FROM = { trait = craven }
#		}
#		modifier = {
#			factor = 0.2
#			FROM = {
#				OR = {
#					trait = slow
#					trait = dull
#				}
#			}
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = kind }
#		}
#		modifier = {
#			factor = 0.5
#			FROM = { trait = charitable }
#		}
#		modifier = {
#			factor = 0.5
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = humble }
#		}
#		modifier = {
#			factor = 0.75
#			FROM = { trait = just }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = proud }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = brave }
#		}
#		modifier = {
#			factor = 1.5
#			FROM = { trait = arbitrary }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = envious }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = greedy }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = impaler }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = { trait = deceitful }
#		}
#		modifier = {
#			factor = 4.0
#			FROM = { trait = ambitious }
#		}
#		modifier = {
#			factor = 2.0
#			FROM = {
#				is_female = yes
#			}
#		}
#		modifier = {
#			factor = 0.5
#			FROM = {
#				is_female = no
#			}
#		}
#	}
#	
#	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
#	membership = {
#		factor = 1
#		
#		modifier = {
#			factor = 0.2
#			pacifist = yes
#		}			
#		
#		modifier = {
#			factor = 0
#			OR = {
#				prisoner = yes
#				trait = incapable
#					is_adult = no
#				is_landed = no
#				preparing_invasion = yes
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				current_heir = {
#					character = ROOT
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				in_faction = faction_succ_seniority
#				in_faction = faction_succ_feudal_elective
#				in_faction = faction_succ_primogeniture
#				in_faction = faction_succ_gavelkind
#				in_faction = faction_succ_tanistry
#				in_faction = faction_succ_ultimogeniture
#				in_faction = faction_agnatic_succession
#				in_faction = faction_agnatic_cognatic_succession
#				in_faction = faction_cognatic_succession
#				in_faction = faction_enatic_cognatic_succession
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_character_modifier = faction_enatic_succession_ultimatum_timer
#		}
#		
#		modifier = {
#			factor = 0
#			liege = { 
#				NOT = { year = 1350 }
#				primary_title = { is_tribal_type_title = yes }
#				culture = ROOT
#				religion = ROOT
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			has_opinion_modifier = {
#				who = LIEGE
#				modifier = opinion_coerced_into_leaving_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			OR = {
#				AND = {
#					NOT = { in_faction = faction_enatic_succession }
#					opinion = { who = LIEGE value = 50 } 
#				}
#				AND = {
#					in_faction = faction_enatic_succession
#					opinion = { who = LIEGE value = 75 } 
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		# Try to exclude people who should rather support a claimant
#		modifier = {
#			factor = 0
#			FROM = { # Remember: the faction leader is also the person who would inherit under this law
#				OR = {
#					NOT = { culture = ROOT }
#					NOT = { religion = ROOT }
#				}
#				liege = {
#					any_demesne_title = {
#						OR = {
#							is_primary_holder_title = yes
#							higher_tier_than = DUKE
#						}
#						ROOT = {
#							primary_title = {
#								de_jure_liege_or_above = PREVPREV
#							}
#						}
#						any_claimant = {
#							culture = ROOT
#							religion = ROOT
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						OR = {
#							AND = {
#								NOT = { in_faction = faction_succ_seniority }
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = -10 # I don't like the pretender enough
#									as_if_liege = yes
#								}
#							}
#							AND = {
#								in_faction = faction_succ_seniority
#								opinion_diff = {
#									first = LIEGE
#									second = PREV
#									value = 10
#									as_if_liege = yes
#								}
#							}
#						}
#					}
#				}
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 1000
#			has_opinion_modifier = {
#				who = FROM
#				modifier = opinion_coerced_into_joining_faction
#			}
#		}
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 25 } 
#			NOT = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}		
#		
#		modifier = {
#			factor = 0
#			opinion = { who = LIEGE value = 50 } 
#			OR = {
#				trait = deceitful
#				trait = ambitious
#				trait = envious
#			}
#			NOT = {	
#				has_opinion_modifier = {
#					who = FROM
#					modifier = opinion_coerced_into_joining_faction
#				}
#			}			
#		}
#		
#		modifier = {
#			factor = 2
#			FROMFROM = {
#				heir_under_seniority_law = {
#					ROOT = {
#						opinion_diff = {
#							first = PREV
#							second = LIEGE
#							value = 25
#							as_if_liege = yes
#						}
#					}
#				}
#			}
#		}
#		
#		modifier = {
#			factor = 0.01
#			trait = content
#		}
#		modifier = {
#			factor = 0.01
#			trait = imbecile
#		}
#		modifier = {
#			factor = 0.1
#			trait = inbred
#		}
#		modifier = {
#			factor = 0.1
#			trait = craven
#		}
#		modifier = {
#			factor = 0.2
#			OR = {
#				trait = slow
#				trait = dull
#			}
#		}
#		modifier = {
#			factor = 0.5
#			trait = kind
#		}
#		modifier = {
#			factor = 0.5
#			trait = charitable
#		}
#		modifier = {
#			factor = 0.5
#			trait = honest
#		}
#		modifier = {
#			factor = 0.75
#			trait = humble
#		}
#		modifier = {
#			factor = 0.75
#			trait = just
#		}
#		modifier = {
#			factor = 1.5
#			trait = proud
#		}
#		modifier = {
#			factor = 1.5
#			trait = brave
#		}
#		modifier = {
#			factor = 1.5
#			trait = arbitrary
#		}
#		modifier = {
#			factor = 2.0
#			trait = envious
#		}
#		modifier = {
#			factor = 2.0
#			trait = greedy
#		}
#		modifier = {
#			factor = 2.0
#			trait = impaler
#		}
#		modifier = {
#			factor = 2.0
#			trait = deceitful
#		}
#		modifier = {
#			factor = 4.0
#			trait = ambitious
#		}
#		modifier = {
#			factor = 2.0
#			is_female = yes
#		}
#		modifier = {
#			factor = 0.5
#			is_female = no
#		}
#	}
#	
#	success = {
#		has_law = succ_seniority
#	}
#	
#	abort = {
#		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
#	}
#	
#	abort_effect = {
#	}
#	
#	effect = {
#		FROM = {
#			any_faction_backer = {
#				faction = faction_enatic_succession
#				reverse_opinion = {
#					modifier = opinion_grateful
#					who = FROM
#					years = 5
#				}
#			}
#		}
#	}
#}

# Overthrow a weak Khan faction
faction_overthrow = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	cancel_on_leader_death = yes # The faction will not automatically continue under a new leader
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_nomadic = yes
		primary_title = { holy_order = no }
		OR = {
			NOT = { has_dlc = "Zeus" }
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = { 
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
		NOT = { trait = incapable }
		liege = {
			NOT = { has_blood_oath_with = PREV }
		}
	}
	
	# Target scope
	allow = {
		is_nomadic = yes
		is_primary_holder_title = yes

		holder_scope = {
			independent = yes
			
			NOT = {
				OR = {
					reverse_has_opinion_modifier = {
						who = FROM
						modifier = opinion_coerced_into_leaving_faction
					}
					blood_brother = {
						holder_scope = {
							character = FROM
						}
					}
				}
			}
		}
	}
	
	# If false, shows the faction entry for players, but disabled
	player_allow = {
		is_nomadic = yes
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_nomadic = yes
			NOT = { trait = incapable }
			prisoner = no
			OR = {
				NOT = { has_dlc = "Zeus" }
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = {
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
					}
				}
			}
			NOT = { trait = incapable }
			#NOT = {
			#	blood_brother = {
			#		holder_scope = {
			#			character = FROM
			#		}
			#	}
			#}
			# Can't join factions when in blood oath with liege
			OR = {
				is_nomadic = no
				NOT = { has_dlc = "Horse Lords" }
				liege = {
					NOT = { has_blood_oath_with = PREV }
				}
			}
		}
	}	
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 50 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
				liege = {
					is_weak_trigger = no
					health = 4
				}
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 75 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
				liege = {
					is_weak_trigger = no
					health = 4
				}		
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { 
				holder_scope = {
					clan_title = {
						FROM = { 
							clan_title = {
								clan_opinion = { who = PREVPREV value = -10 }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			NOT = { 
				holder_scope = {
					clan_title = {
						FROM = { 
							clan_title = {
								clan_opinion = { who = PREVPREV value = -50 }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 4.0
			NOT = { 
				holder_scope = {
					clan_title = {
						FROM = { 
							clan_title = {
								clan_opinion = { who = PREVPREV value = -75 }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			holder_scope = { 
				clan_title = {
					FROM = { 
						clan_title = {
							clan_opinion = { who = PREVPREV value = 10 }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.05
			holder_scope = { 
				clan_title = {
					FROM = { 
						clan_title = {
							clan_opinion = { who = PREVPREV value = 50 }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.01
			holder_scope = { 
				clan_title = {
					FROM = { 
						clan_title = {
							clan_opinion = { who = PREVPREV value = 75 }
						}
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = -10 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}

		modifier = {
			factor = 0.25
			FROM = { opinion = { who = LIEGE value = 10 } }
		}
		modifier = {
			factor = 0.05
			FROM = { opinion = { who = LIEGE value = 50 } }
		}
		modifier = {
			factor = 0.01
			FROM = { opinion = { who = LIEGE value = 75 } }
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = content
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = imbecile
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = inbred
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					OR = {
						trait = slow
						trait = dull
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = kind
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = humble
				}
			}
		}

		modifier = {
			factor = 2
			FROM = {
				liege = {
					trait = craven
				}
			}
		}

		modifier = {
			factor = 3
			FROM = {
				liege = {
					is_weak_trigger = yes
				}
			}
		}

		modifier = {
			factor = 0.01
			FROM = {
				liege = {
					is_strong_trigger = yes
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					NOT = { health = 5 }
				}
			}
		}

		modifier = {
			factor = 2
			FROM = {
				liege = {
					NOT = { health = 3 }
				}
			}
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			NOR = {
				opinion = { who = FROM value = -40 }
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 }
			liege = {
				is_weak_trigger = no
				health = 4
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = content
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = imbecile
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = inbred
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					OR = {
						trait = slow
						trait = dull
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = kind
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					trait = humble
				}
			}
		}

		modifier = {
			factor = 2
			FROM = {
				liege = {
					trait = craven
				}
			}
		}

		modifier = {
			factor = 3
			FROM = {
				liege = {
					is_weak_trigger = yes
				}
			}
		}

		modifier = {
			factor = 0.01
			FROM = {
				liege = {
					is_strong_trigger = yes
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}

		modifier = {
			factor = 1.5
			FROM = {
				liege = {
					NOT = { health = 5 }
				}
			}
		}

		modifier = {
			factor = 2
			FROM = {
				liege = {
					NOT = { health = 3 }
				}
			}
		}

		modifier = {
			factor = 1.5
			NOT = { 
				liege = { 
					clan_title = {
						ROOT = { 
							clan_title = {
								clan_opinion = { who = PREVPREV value = -10 }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			NOT = { 
				liege = { 
					clan_title = {
						ROOT = { 
							clan_title = {
								clan_opinion = { who = PREVPREV value = -50 }
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 4.0
			NOT = { 
				liege = { 
					clan_title = {
						ROOT = { 
							clan_title = {
								clan_opinion = { who = PREVPREV value = -75 }
							}
						}
					}
				}
			}
		}

		modifier = {
			factor = 0.5
			liege = { 
				clan_title = {
					ROOT = { 
						clan_title = {
							clan_opinion = { who = PREVPREV value = 10 }
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			liege = { 
				clan_title = {
					ROOT = { 
						clan_title = {
							clan_opinion = { who = PREVPREV value = 50 }
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.05
			liege = { 
				clan_title = {
					ROOT = { 
						clan_title = {
							clan_opinion = { who = PREVPREV value = 75 }
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -10 } }
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } }
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } }
		}
		modifier = {
			factor = 0.25
			opinion = { who = LIEGE value = 10 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.05
			opinion = { who = LIEGE value = 50 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			opinion = { who = LIEGE value = 75 }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		always = no
	}
	
	abort = {
		always = no
	}
	
	abort_effect = {
	}
	
	effect = {
	}
}

# Increase Council Power
faction_increase_council_power = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		has_dlc = "Zeus"
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		primary_title = { holy_order = no }
		OR = {
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = { 
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
		NOT = { trait = incapable }
		liege = { 
			is_nomadic = no
			OR = {
				year = 1350
				primary_title = { is_tribal_type_title = no }
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		primary_title = { higher_tier_than = BARON }
		
		NOT = { has_character_modifier = faction_council_power_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		higher_tier_than = COUNT
		is_primary_holder_title = yes
		holder_scope = {
			primary_title = {
				ROOT = {
					tier = PREV
				}
				OR = {
					has_law = law_voting_power_0
					has_law = banish_voting_power_0
					has_law = execution_voting_power_0
					has_law = revoke_title_voting_power_0
					has_law = grant_title_voting_power_0
					has_law = imprison_voting_power_0
					has_law = war_voting_power_0
				}
			}

			NOR = {
				any_vassal = {
					higher_tier_than = BARON
					NOT = {	character = FROM }
					num_of_faction_backers = {
						faction = faction_increase_council_power
						value = 0
					}
				}
				any_war = {
					war_title = ROOT
					using_cb = increase_council_power_war
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			NOT = { has_character_modifier = faction_council_power_ultimatum_timer }
			OR = {
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = { 
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
					}
				}
			}
		}
	}		
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				NAND = {
					culture = FROM
					religion = FROM
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
				is_voter = no
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}				
			}
		}
		
		modifier = {
			factor = 4
			FROM = { is_voter = yes }
		}

		modifier = {
			factor = 5
			FROM = {
				is_voter = yes
				has_position = malcontent
			}
		}

		modifier = {
			factor = 5
			FROM = {
				is_voter = yes
				NOT = { has_position = loyalist }
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = -10 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_council_power_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			NOR = {
				opinion = { who = FROM value = -40 }
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = {
				who = LIEGE
				value = 25
			}
			is_voter = no
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 80 }
			is_voter = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 4
			is_voter = yes
		}

		modifier = {
			factor = 5
			FROM = {
				is_voter = yes
				has_position = malcontent
			}
		}

		modifier = {
			factor = 5
			FROM = {
				is_voter = yes
				NOT = { has_position = loyalist }
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -10 } }
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } }
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } }
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		holder_scope = {
			FROM = {
				has_opinion_modifier = { who = PREV modifier = opinion_increased_council_power }
			}
		}
	}
	
	abort = {
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_increase_council_power
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Powerful vassals overthrow their liege
faction_powerful_vassal_takeover = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		has_dlc = "Zeus"
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_feudal = yes
		primary_title = { holy_order = no }
		OR = {
			is_voter = no
			liege = {
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
					#has_council = no
				}
			}
		}
		NOT = { trait = incapable }
		liege = {
			is_feudal = yes
			NOT = { controls_religion = yes }
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		primary_title = { higher_tier_than = BARON }
		
		NOT = { has_character_modifier = faction_powerful_vassal_takeover_ultimatum_timer }
	}
	
	# Target scope
	allow = {
		higher_tier_than = DUKE
		is_primary_holder_title = yes
		holder_scope = {
			primary_title = {
				ROOT = {
					tier = PREV
				}
			}

			NOT = {
				any_vassal = {
					higher_tier_than = COUNT
					NOT = {	character = FROM }
					num_of_faction_backers = {
						faction = faction_powerful_vassal_takeover
						value = 0
					}
				}
			}
		}
		
		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = powerful_vassal_takeover_war
				}
			}
			
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_replaced_bad_ruler
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			NOT = { has_character_modifier = faction_powerful_vassal_takeover_ultimatum_timer }
			OR = {
				is_voter = no
				liege = { 
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = war_voting_power_1 } }
						#has_council = no
					}
				}
			}
		}
	}		
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					NOT = { culture = FROM }
					NOT = { religion = FROM }
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 0 } 
				NOR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
				is_voter = no
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 40 } 			
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = -10 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		modifier = {
			factor = 0.75
			FROM = {
				NOR = {
					has_opinion_modifier = { who = LIEGE modifier = opinion_evil_tyrant }
					has_opinion_modifier = { who = LIEGE modifier = opinion_tyrant }
				}
			}
		}
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = { 
				OR = {
					trait = slow
					trait = dull
				}
			}
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_powerful_vassal_takeover_ultimatum_timer
		}

		modifier = {
			factor = 0
			opinion = { who = FROMFROM value = 0 }
		}
		
		modifier = {
			factor = 0
			NOT = { opinion = { who = FROM value = -40 } }
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			liege = { 
				NOT = { year = 1350 }
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 40 }
			is_voter = no
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}

		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 80 }
			is_voter = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0.2
			pacifist = yes
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -10 } }
		}
		modifier = {
			factor = 2.0
			NOT = { opinion = { who = LIEGE value = -50 } }
		}
		modifier = {
			factor = 4.0
			NOT = { opinion = { who = LIEGE value = -75 } }
		}
		
		modifier = {
			factor = 0.75
			NOR = {
				has_opinion_modifier = { who = LIEGE modifier = opinion_evil_tyrant }
				has_opinion_modifier = { who = LIEGE modifier = opinion_tyrant }
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.01
			trait = imbecile
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = inbred
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.1
			trait = craven
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.2
			OR = {
				trait = slow
				trait = dull
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		holder_scope = {
			FROM = {
				has_opinion_modifier = { who = PREV modifier = opinion_abdicated }
			}
		}
	}
	
	abort = {
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_powerful_vassal_takeover
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}